{"version":3,"sources":["webpack://appForm/./src/App/components/TitleBar.vue?5f2f","webpack://appForm/src/App/components/TitleBar.vue","webpack://appForm/./src/App/components/TitleBar.vue?4586","webpack://appForm/./src/App/components/TitleBar.vue","webpack://appForm/./public/long-arrow-alt-left-solid.svg","webpack://appForm/./src/App/GestionFields.vue?ed2a","webpack://appForm/./src/App/gestions-chemps/store.js","webpack://appForm/src/App/GestionFields.vue","webpack://appForm/./src/App/GestionFields.vue?cf4b","webpack://appForm/./src/App/GestionFields.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","conf","col","staticClass","on","returnHome","_v","_s","text","form","name","_e","directives","rawName","value","expression","class","uid","seeDevis","staticRenderFns","props","showDevis","type","Object","default","data","computed","methods","$router","push","component","module","exports","listForms","state","fields","filtre","formid","loaders","GestionField","GestionFieldFiltre","mutations","SET_FIELDS","forEach","item","jsonfield","id","stepes","SET_FILTRE","key","actions","GetFields","commit","dispatch","payload","filters","AND","column","preffix","config","bPost","then","r","catch","GetFieldsDefault","defaultjson","SetFiltre","components","TitleBar","Filtre","Promise","resolv","tableauChamps","mounted","$store","registerModule"],"mappings":"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","file":"appForm.umd.min.33.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',{attrs:{\"align-h\":\"center\"}},[_c('b-col',{attrs:{\"lg\":_vm.conf.col ? '12' : '10',\"cols\":\"12\"}},[_c('div',{staticClass:\"block-title pr-2\"},[_c('div',{staticClass:\"backButton\",attrs:{\"to\":\"/\"},on:{\"click\":_vm.returnHome}},[_c('img',{attrs:{\"src\":require(\"../../../public/long-arrow-alt-left-solid.svg\"),\"alt\":\"\",\"width\":\"55px\",\"height\":\"30px\"}})]),_c('h5',{staticClass:\"m-0\"},[_vm._v(\" \"+_vm._s(_vm.conf.text)+\" \"),(_vm.form.name)?_c('span',{staticClass:\"form-title\"},[_vm._v(\" : \"+_vm._s(_vm.form.name))]):_vm._e()]),_c('div',[_c('h5',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDevis),expression:\"showDevis\"}],staticClass:\"m-0\",class:_vm.uid ? 'title-right' : '',on:{\"click\":_vm.seeDevis}},[(_vm.uid)?_c('span',[_vm._v(\" Voir mes devis\")]):_vm._e()])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-row align-h=\"center\" class=\"\">\n    <b-col :lg=\"conf.col ? '12' : '10'\" cols=\"12\">\n      <div class=\"block-title pr-2\">\n        <div class=\"backButton\" @click=\"returnHome\" to=\"/\">\n          <img\n            src=\"../../../public/long-arrow-alt-left-solid.svg\"\n            alt=\"\"\n            width=\"55px\"\n            height=\"30px\"\n          />\n        </div>\n        <h5 class=\"m-0\">\n          {{ conf.text }}\n          <span class=\"form-title\" v-if=\"form.name\"> : {{ form.name }}</span>\n        </h5>\n        <div>\n          <h5\n            class=\"m-0\"\n            v-show=\"showDevis\"\n            :class=\"uid ? 'title-right' : ''\"\n            @click=\"seeDevis\"\n          >\n            <span v-if=\"uid\"> Voir mes devis</span>\n          </h5>\n        </div>\n      </div>\n    </b-col>\n  </b-row>\n</template>\n\n<script>\nimport { mapGetters, mapState } from \"vuex\";\n\nexport default {\n  props: {\n    showDevis: { type: Boolean, default: true },\n    conf: {\n      type: Object,\n      default: function () {\n        return {\n          col: false,\n          text: \"Estimation de devis\",\n        };\n      },\n    },\n  },\n  data() {\n    return {\n      value: 1,\n    };\n  },\n  computed: {\n    ...mapState([\"stepsIndex\", \"form\"]),\n    ...mapGetters([\"uid\"]),\n  },\n  methods: {\n    returnHome() {\n      this.$router.push({ path: `/` });\n    },\n    seeDevis() {\n      this.$router.push({ path: `/traitement-my-own/${this.id}` });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TitleBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TitleBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TitleBar.vue?vue&type=template&id=0bb93234&\"\nimport script from \"./TitleBar.vue?vue&type=script&lang=js&\"\nexport * from \"./TitleBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/long-arrow-alt-left-solid.d9d4427b.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('title-bar',{attrs:{\"conf\":{ col: true, text: 'Gestion des champs' }}}),_c('Filtre',{attrs:{\"listForms\":_vm.listForms}}),_c('tableauChamps',{attrs:{\"listForms\":_vm.listForms}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// mini store, utilisable uniquement dans l'espace de gestion des champs.\nimport config from \"../config/config.js\";\nexport default {\n  state: () => ({\n    /**\n     * Contient la liste des champs utilisés par le gestionnaire de champs.\n     */\n    fields: [],\n    /**\n     * Permet de filtrer les champs reçu.\n     */\n    filtre: {\n      formid: \"\",\n    },\n    /**\n     * - permet d'afficher un loader, si necessaire.\n     */\n    loaders: {\n      GestionField: false,\n      GestionFieldFiltre: false,\n    },\n  }),\n  mutations: {\n    SET_FIELDS(state, fields) {\n      fields.forEach((item) => {\n        state.fields.push({\n          ...item.jsonfield,\n          id: item.id,\n          stepes: item.stepes,\n        });\n      });\n    },\n    SET_FILTRE(state, filtre) {\n      state.filtre[filtre.key] = filtre.value;\n    },\n  },\n  actions: {\n    /**\n     * Recupere les champs\n     * @param {*} param0\n     */\n    GetFields({ commit, state, dispatch }) {\n      state.loaders.GestionField = true;\n      state.loaders.GestionFieldFiltre = true;\n      state.fields = [];\n      // var datas =\n      //   \" select f.id, f.machine_name, f.formid, f.jsonfield, f.uid, aps.info  from `appformmanager_fields` as f \";\n      // datas +=\n      //   \" left join `appformmanager_steps_fields` as apsf ON apsf.formid = f.formid and apsf.machine_name = f.machine_name \";\n      // datas +=\n      //   \" left join `appformmanager_steps` as aps ON aps.stepid = apsf.stepid \";\n      if (state.filtre.formid) {\n        // datas +=\n        //   \" where f.formid='\" + state.filtre.formid + \"' order by f.id DESC \";\n        var payload = {\n          filters: {\n            AND: [],\n          },\n        };\n        payload.filters.AND.push({\n          column: \"formid\",\n          value: state.filtre.formid,\n          preffix: \"f\",\n        });\n        return config\n          .bPost(\"/appformmanager/load-fields\", payload)\n          .then((r) => {\n            commit(\"SET_FIELDS\", r.data);\n            state.loaders.GestionField = false;\n            dispatch(\"GetFieldsDefault\");\n          })\n          .catch(() => {\n            state.loaders.GestionField = false;\n            state.loaders.GestionFieldFiltre = false;\n          });\n      }\n    },\n    GetFieldsDefault({ state }) {\n      // var datas =\n      //   \" select f.defaultjson from `appformmanager_steps_fields` as f \";\n      if (state.filtre.formid !== \"\") {\n        // datas +=\n        //   \" where f.defaultjson is not null and f.formid=\" +\n        //   state.filtre.formid +\n        //   \"  order by f.stepid ASC  \";\n        var payload = {\n          filters: {\n            AND: [],\n          },\n        };\n        payload.filters.AND.push({\n          column: \"formid\",\n          value: state.filtre.formid,\n          preffix: \"f\",\n        });\n        return config\n          .bPost(\"/appformmanager/load-fields-default\", payload)\n          .then((r) => {\n            r.data.forEach((item) => {\n              state.fields.push({\n                ...item.defaultjson,\n                formid: state.filtre.formid,\n                stepes: item.stepes,\n              });\n            });\n            state.loaders.GestionFieldFiltre = false;\n          })\n          .catch(() => {\n            state.loaders.GestionFieldFiltre = false;\n          });\n      }\n    },\n    SetFiltre({ commit }, filtre) {\n      commit(\"SET_FILTRE\", filtre);\n    },\n  },\n};\n","<template>\n  <div>\n    <title-bar :conf=\"{ col: true, text: 'Gestion des champs' }\"></title-bar>\n    <Filtre :listForms=\"listForms\"></Filtre>\n    <tableauChamps :listForms=\"listForms\"></tableauChamps>\n  </div>\n</template>\n\n<script>\nimport TitleBar from \"./components/TitleBar.vue\";\n//import Filtre from \"./gestions-chemps/filtres.vue\";\n//import tableauChamps from \"./gestions-chemps/tableauChamps.vue\";\nimport MiniStore from \"./gestions-chemps/store.js\";\nexport default {\n  name: \"GestionFields\",\n  components: {\n    TitleBar,\n    // on doit charge le sous module vuex avant l'execution de ce dernier.\n    Filtre: () => {\n      return new Promise((resolv) => {\n        resolv(import(\"./gestions-chemps/filtres.vue\"));\n      });\n    },\n    // on doit charge le sous module vuex avant l'execution de ce dernier.\n    tableauChamps: () => {\n      return new Promise((resolv) => {\n        resolv(import(\"./gestions-chemps/tableauChamps.vue\"));\n      });\n    },\n  },\n  data() {\n    return {\n      listForms: [],\n    };\n  },\n  mounted() {\n    this.$store.registerModule(\"StoreGestionChamps\", MiniStore);\n    this.$store.dispatch(\"loadFormsDatas\").then(() => {\n      this.$store.state.items.forEach((item) => {\n        this.listForms.push({ value: item.id, text: item.name });\n      });\n    });\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GestionFields.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GestionFields.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GestionFields.vue?vue&type=template&id=04b68272&\"\nimport script from \"./GestionFields.vue?vue&type=script&lang=js&\"\nexport * from \"./GestionFields.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}