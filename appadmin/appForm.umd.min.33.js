(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[33],{"63c9":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-row",{attrs:{"align-h":"center"}},[i("b-col",{attrs:{lg:e.conf.col?"12":"10",cols:"12"}},[i("div",{staticClass:"block-title pr-2"},[i("div",{staticClass:"backButton",attrs:{to:"/"},on:{click:e.returnHome}},[i("img",{attrs:{src:s("6416"),alt:"",width:"55px",height:"30px"}})]),i("h5",{staticClass:"m-0"},[e._v(" "+e._s(e.conf.text)+" "),e.form.name?i("span",{staticClass:"form-title"},[e._v(" : "+e._s(e.form.name))]):e._e()]),i("div",[i("h5",{directives:[{name:"show",rawName:"v-show",value:e.showDevis,expression:"showDevis"}],staticClass:"m-0",class:e.uid?"title-right":"",on:{click:e.seeDevis}},[e.uid?i("span",[e._v(" Voir mes devis")]):e._e()])])])])],1)},o=[],n=s("f3f3"),a=s("2f62"),r={props:{showDevis:{type:Boolean,default:!0},conf:{type:Object,default:function(){return{col:!1,text:"Estimation de devis"}}}},data:function(){return{value:1}},computed:Object(n["a"])(Object(n["a"])({},Object(a["c"])(["stepsIndex","form"])),Object(a["b"])(["uid"])),methods:{returnHome:function(){this.$router.push({path:"/"})},seeDevis:function(){this.$router.push({path:"/traitement-my-own/".concat(this.id)})}}},l=r,f=s("2877"),c=Object(f["a"])(l,i,o,!1,null,null,null);t["a"]=c.exports},6416:function(e,t,s){e.exports=s.p+"img/long-arrow-alt-left-solid.d9d4427b.svg"},abee:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("title-bar",{attrs:{conf:{col:!0,text:"Gestion des champs"}}}),s("Filtre",{attrs:{listForms:e.listForms}}),s("tableauChamps",{attrs:{listForms:e.listForms}})],1)},o=[],n=(s("d3b7"),s("e6cf"),s("e260"),s("3ca3"),s("ddb0"),s("159b"),s("b0c0"),s("63c9")),a=s("f3f3"),r=s("f158"),l={state:function(){return{fields:[],filtre:{formid:""},loaders:{GestionField:!1,GestionFieldFiltre:!1}}},mutations:{SET_FIELDS:function(e,t){t.forEach((function(t){e.fields.push(Object(a["a"])(Object(a["a"])({},JSON.parse(t.jsonfield)),{},{id:t.id}))}))},SET_FILTRE:function(e,t){e.filtre[t.key]=t.value}},actions:{GetFields:function(e){var t=e.commit,s=e.state,i=e.dispatch;s.loaders.GestionField=!0,s.loaders.GestionFieldFiltre=!0,s.fields=[];var o=" select * from `appformmanager_fields` as f ";if(s.filtre.formid)return o+=" where f.formid='"+s.filtre.formid+"' order by f.id DESC ",r["a"].getData(o).then((function(e){console.log("GetFields : ",e),t("SET_FIELDS",e.data),s.loaders.GestionField=!1,i("GetFieldsDefault")})).catch((function(){s.loaders.GestionField=!1,s.loaders.GestionFieldFiltre=!1}))},GetFieldsDefault:function(e){var t=e.state,s=" select f.defaultjson from `appformmanager_steps_fields` as f ";if(""!==t.filtre.formid)return s+=" where f.defaultjson is not null and f.formid="+t.filtre.formid+"  order by f.stepid ASC  ",r["a"].getData(s).then((function(e){e.data.forEach((function(e){t.fields.length<50&&t.fields.push(Object(a["a"])(Object(a["a"])({},JSON.parse(e.defaultjson)),{},{formid:t.filtre.formid}))})),t.loaders.GestionFieldFiltre=!1})).catch((function(){t.loaders.GestionFieldFiltre=!1}))},SetFiltre:function(e,t){var s=e.commit;s("SET_FILTRE",t)}}},f={name:"GestionFields",components:{TitleBar:n["a"],Filtre:function(){return new Promise((function(e){e(Promise.all([s.e(0),s.e(1),s.e(22)]).then(s.bind(null,"70f9")))}))},tableauChamps:function(){return new Promise((function(e){e(Promise.all([s.e(0),s.e(1),s.e(23)]).then(s.bind(null,"f28f")))}))}},data:function(){return{listForms:[]}},mounted:function(){var e=this;console.log("chargement de gestion des champs."),this.$store.registerModule("StoreGestionChamps",l),this.$store.dispatch("loadFormsDatas").then((function(){e.$store.state.items.forEach((function(t){e.listForms.push({value:t.id,text:t.name})}))}))}},c=f,d=s("2877"),u=Object(d["a"])(c,i,o,!1,null,null,null);t["default"]=u.exports}}]);
//# sourceMappingURL=appForm.umd.min.33.js.map