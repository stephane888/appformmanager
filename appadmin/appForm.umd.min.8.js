(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[8],{"0b7d":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"element-center full-block"},[i("div",{staticClass:"choice-section text-right"},[i("b-row",{attrs:{"align-h":"end"}},[i("b-col",[i("p",{staticClass:"button-travaux"},[i("a",{attrs:{href:"/node/52"}},[e._v("Tous les travaux")])])])],1),e.mode?i("b-button-group",{staticClass:"boutton-absolute"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-info",modifiers:{hover:!0,"v-info":!0}}],attrs:{variant:"outline-info",size:"md",title:"Ajouter un champs"},on:{click:e.addFormField}},[i("b-icon",{staticStyle:{"font-size":"1.5rem"},attrs:{icon:"plus"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-success",modifiers:{hover:!0,"v-success":!0}}],attrs:{variant:"outline-success",size:"md",title:"Editer le formulaire"},on:{click:e.configSteps}},[i("b-icon",{attrs:{icon:"pencil"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-danger",modifiers:{hover:!0,"v-danger":!0}}],attrs:{variant:"outline-danger",size:"md",title:"Suprimer le formulaire"},on:{click:e.deleteSteps}},[i("b-icon",{attrs:{icon:"trash"}})],1),i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.clone-current-stepe",modifiers:{"clone-current-stepe":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-secondary",modifiers:{hover:!0,"v-secondary":!0}}],attrs:{variant:"outline-secondary",size:"md",title:"cloner l'etape"}},[i("b-icon",{attrs:{icon:"clipboard-plus"}})],1)],1):e._e()],1),i("forms"),e.mode?i("div",[i("add-form-field",{ref:"formField",attrs:{isOpen:e.modalFormFieldIsOpen,nouveau:!0,"id-modal":"form-step"}}),i("StepConfiguration",{ref:"StepConfiguration"}),i("cloneCurrentStepe")],1):e._e()],1)},s=[],n=i("f3f3"),o=(i("e260"),i("d3b7"),i("e6cf"),i("3ca3"),i("ddb0"),i("a434"),i("2f62")),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ValidationObserver",{staticClass:"center-container",scopedSlots:e._u([{key:"default",fn:function(t){return[a("b-row",{staticClass:"block-container",attrs:{"align-h":"center"}},[e.stepsIndex>0?a("b-col",{staticClass:"text-left",attrs:{cols:"12"}},[a("div",{staticClass:"backButton",on:{click:e.back}},[a("img",{attrs:{src:i("6416"),alt:""}})])]):e._e(),e.formDatas.info.headerTitle&&e.formDatas.info.description?a("div",{staticClass:"help-container"},[a("div",{staticClass:"help-block"},[a("p",{staticClass:"help-block__title"},[e._v(e._s(e.formDatas.info.headerTitle))]),a("p",{staticClass:"help-block__content"},[e._v(" "+e._s(e.formDatas.info.description)+" ")])])]):e._e(),e._l(e.formDatas.fields,(function(e,t){return a("div",{key:t,staticClass:"col-12"},[a("display-fields",{attrs:{type:e.type,id:t}})],1)})),e.StatusStepsIndexs?a("b-col",{staticClass:"form-nav-bouton",attrs:{cols:"12"}},[a("button",{staticClass:"next-bouton",class:e.stepsState&&!t.invalid?"next-bouton--active":"next-bouton--disable",attrs:{disabled:!(e.stepsState&&!t.invalid)},on:{click:e.suivant}},[e._v(" Suivant ")])]):e._e(),e.StatusStepsIndexs?e._e():a("b-col",{staticClass:"form-nav-bouton",attrs:{cols:"12"}},[a("b-row",[e.uid?a("b-col",[a("button",{staticClass:"next-bouton",on:{click:function(t){return e.SaveByUser(1)}}},[a("b-icon",{attrs:{icon:"server"}}),e._v(" Enregistrer ")],1)]):e._e(),a("b-col",[a("button",{staticClass:"next-bouton",on:{click:function(t){return e.SaveByUser(0)}}},[a("b-icon",{attrs:{icon:"server"}}),e._v(" Me rappeller ")],1)])],1)],1)],2),a("getStatusValidation",{attrs:{"validation-observer":t}})]}}])})},l=[],c=i("7bb1"),d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("div",["codepostal"==e.type?i("b-row",{attrs:{"align-h":"center"}},[i("b-col",[i("autocomplete",{attrs:{field:e.formDatas.fields[e.id]}})],1)],1):e._e(),"checkboximg"==e.type?i("ImageCheck",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"text"==e.type||"number"==e.type?i("label-row",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"numberup"==e.type?i("label-up",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"increment"==e.type?i("b-row",{attrs:{"align-h":"center"}},[i("increment-number",{attrs:{field:e.formDatas.fields[e.id]}})],1):e._e(),"markuptitle"==e.type?i("markup-title",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"markupimage"==e.type?i("markup-image",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"radio"==e.type?i("radio",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"select"==e.type?i("select-display",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"checkbox"==e.type?i("checkbox",{attrs:{field:e.confirmStructureField(e.formDatas.fields[e.id])}}):e._e(),"radiodesc"==e.type?i("radio-desc",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"file"==e.type?i("files",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"recapitulatif"==e.type?i("recapitulatif",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"userlogin"==e.type?i("userlogin",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),"input-aide-financiere"==e.type?i("AideFinanciere",{attrs:{field:e.formDatas.fields[e.id]}}):e._e(),this.$store.state.mode?i("div",{staticClass:"boutton-absolute d-flex"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-success",modifiers:{hover:!0,"v-success":!0}}],staticClass:"border-0",attrs:{size:"sm",variant:"outline-success",title:"Editer ce champs"},on:{click:e.editFormField}},[i("b-icon",{attrs:{icon:"pencil","font-scale":"1"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-danger",modifiers:{hover:!0,"v-danger":!0}}],staticClass:"border-0",attrs:{size:"sm",variant:"outline-danger",title:"Supprimer ce champs"},on:{click:e.deleteField}},[i("b-icon",{attrs:{icon:"trash","font-scale":"1"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-secondary",modifiers:{hover:!0,"v-secondary":!0}}],staticClass:"border-0",attrs:{size:"sm",variant:"outline-secondary",title:"Deplacer vers le haut"},on:{click:e.modeToUp}},[i("b-icon",{attrs:{icon:"arrow-bar-up","font-scale":"1"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-secondary",modifiers:{hover:!0,"v-secondary":!0}}],staticClass:"border-0",attrs:{size:"sm",variant:"outline-secondary",title:"Deplacer vers le bas"},on:{click:e.moveToDown}},[i("b-icon",{attrs:{icon:"arrow-bar-down","font-scale":"1"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-secondary",modifiers:{hover:!0,"v-secondary":!0}}],staticClass:"border-0",attrs:{size:"sm",variant:"outline-secondary",title:"Cloner ce champs"},on:{click:e.cloneField}},[i("b-icon",{attrs:{icon:"clipboard-plus","font-scale":"1"}})],1)],1):e._e()],1),i("add-form-field",{ref:"editFormField"+e.id,attrs:{field:e.field,nouveau:!1,"id-modal":"edit"+e.id}})],1)},u=[],f=i("0122"),m=(i("a9e3"),i("cfb1")),p=i("2c10"),b={components:{AddFormField:m["default"],ImageCheck:function(){return i.e(10).then(i.bind(null,"820b"))},IncrementNumber:function(){return i.e(11).then(i.bind(null,"1ad8"))},autocomplete:function(){return Promise.all([i.e(22),i.e(32)]).then(i.bind(null,"fd80"))},Radio:function(){return i.e(16).then(i.bind(null,"8bfb"))},RadioDesc:function(){return i.e(30).then(i.bind(null,"795e"))},Checkbox:function(){return i.e(29).then(i.bind(null,"7f81"))},LabelRow:function(){return i.e(12).then(i.bind(null,"ab64"))},SelectDisplay:function(){return i.e(31).then(i.bind(null,"1d25"))},MarkupTitle:function(){return i.e(15).then(i.bind(null,"725b"))},MarkupImage:function(){return i.e(14).then(i.bind(null,"1c8e"))},files:function(){return Promise.all([i.e(2),i.e(24)]).then(i.bind(null,"65db"))},LabelUp:function(){return i.e(13).then(i.bind(null,"cc4c"))},recapitulatif:function(){return i.e(17).then(i.bind(null,"1247"))},userlogin:function(){return i.e(18).then(i.bind(null,"be10"))},AideFinanciere:function(){return i.e(26).then(i.bind(null,"e8d9"))}},props:{type:{type:String,default:""},id:{type:Number,default:null}},data:function(){return{typeFieldSelected:null,option:{},field:{},labelState:null}},watch:{},computed:Object(n["a"])({},Object(o["b"])(["formDatas"])),methods:{confirmStructureField:function(e){if("checkbox"===e.type){var t=[],i=Object(f["a"])(e.value);"object"!==i&&(e.value&&""!==e.value?(t.push(e.value),e.value=t):e.value=[])}return e},getImage:function(e){var t=this.formDatas.fields[this.id].options;console.log("le",t);for(var i=0;i<t.length;i++)i==e?(t[i].isActive=!t[i].isActive,this.formDatas.fields[this.id].value=t[i].value):t[i].isActive=!1},editFormField:function(){var e="modal-addForm--edit"+this.id;this.field=this.formDatas.fields[this.id],this.$bvModal.show(e)},deleteField:function(){for(var e=this.formDatas.fields,t=e.length-1;t>=0;t--)t===this.id&&(e.splice(t,1),console.log("iiippp"))},moveToDown:function(){var e=this.id+1;p["a"].array_move(this.formDatas.fields,this.id,e)},modeToUp:function(){var e=this.id-1;p["a"].array_move(this.formDatas.fields,this.id,e)},cloneField:function(){var e=JSON.stringify(this.formDatas.fields[this.id]);this.formDatas.fields.push(JSON.parse(e))}}},h=b,v=i("2877"),y=Object(v["a"])(h,d,u,!1,null,null,null),g=y.exports,O=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{object:e.validationObserverField}},[i("pre",{staticClass:"text-left d-none"},[e._v(e._s(e.formDatasValidate))])])},D=[],F={name:"getStatusValidation",props:{validationObserver:{type:Object,required:!0}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:Object(n["a"])(Object(n["a"])({},Object(o["c"])(["formDatasValidate"])),{},{validationObserverField:function(){return this.validationObserver.fields?(this.setFormDatasValidate(),this.validationObserver.fields):{}}}),methods:{setFormDatasValidate:function(){this.$store.dispatch("setFormDatasValidate",this.validationObserver.fields)}}},_=F,k=Object(v["a"])(_,O,D,!1,null,"d99bc1b4",null),S=k.exports,x={name:"forms",components:{ValidationObserver:c["a"],DisplayFields:g,getStatusValidation:S},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["form","mode","stepsIndex","StatusStepsIndexs","price"])),Object(o["b"])(["formDatas","uid"])),{},{stepsState:function(){return!!(this.form.forms&&this.form.forms.length-1>this.$store.state.stepsIndex)}}),methods:{suivant:function(){if(this.stepsState){this.$store.dispatch("stepsIndex",this.stepsIndex);var e=!0;this.mode&&!e||this.$store.dispatch("saveDatas")}},back:function(){this.$store.dispatch("stepsBack")},SaveByUser:function(e){this.$store.dispatch("saveDatasUser",e)}}},C=x,j=(i("ee83"),Object(v["a"])(C,r,l,!1,null,null,null)),w=j.exports,I={components:{AddFormField:function(){return Promise.resolve().then(i.bind(null,"cfb1"))},StepConfiguration:function(){return i.e(19).then(i.bind(null,"e248"))},cloneCurrentStepe:function(){return i.e(20).then(i.bind(null,"33f3"))},forms:w},data:function(){return{modalFormFieldIsOpen:!1,inputDatas:[],selected:"",options:[{text:"chamblie",value:"a"},{text:"callakala",value:"b"}],imageCheck:[{isActive:!1,description:"1 côté"},{isActive:!1,description:"2 côté"},{isActive:!1,description:"3 côté"},{isActive:!1,description:"4 côté"}]}},mounted:function(){},watch:{fields:function(){console.log("changement")}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["mode","stepsIndex","stepsIndexs","form"])),Object(o["b"])(["formDatas"])),{},{taille:function(){return!!this.fields.options.length}}),methods:{deleteSteps:function(){for(var e=this.$store.getters.form.forms,t=e.indexOf(this.formDatas),i=e.length-1;i>=0;i--)i===t&&(e.splice(i,1),this.$store.state.stepsIndex=this.form.forms.length-1)},addFormField:function(){this.$refs.formField.openAddFormFieldPopUp()},configSteps:function(){this.$refs.StepConfiguration.openPopUp()},getImage:function(e){for(var t=0;t<this.imageCheck.length;t++)this.imageCheck[t].isActive=t==e&&!this.imageCheck[t].isActive}}},$=I,A=Object(v["a"])($,a,s,!1,null,null,null);t["a"]=A.exports},"64d1":function(e,t,i){},"75eb":function(e,t,i){},"762c":function(e,t,i){},7817:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-container",{staticClass:"bv-example-row p-5",attrs:{fluid:"lg"}},[i("div",[i("title-bar",{attrs:{id:e.id}}),i("loaderIcon",{attrs:{busy:e.isComplete}}),i("b-row",{attrs:{"align-h":"center"}},[i("transition",{attrs:{name:"fade"}},[e.formDatas&&e.formDatas.info?i("b-col",{attrs:{cols:"12",lg:"10"}},[i("pages",{attrs:{level:e.stepsIndex}})],1):e._e()],1)],1)],1)])},s=[],n=i("f3f3"),o=i("2f62"),r=i("0b7d"),l=i("63c9"),c={name:"userpage",props:{id:{type:String,required:!0}},components:{pages:r["a"],TitleBar:l["a"]},data:function(){return{}},mounted:function(){var e=this;this.$store.dispatch("setFormId",this.id),this.$store.dispatch("loadStepsDatas",{formId:this.id}).then((function(){e.busy=!1}))},watch:{},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(o["c"])(["stepsIndex","allStepsDatas","fields","price","form"])),Object(o["b"])(["formDatas","uid"])),{},{isComplete:function(){return!(this.formDatas&&this.formDatas.fields.length||!this.busy)}}),methods:{returnHome:function(){this.$router.push({path:"/"})}}},d=c,u=(i("cb9b"),i("2877")),f=Object(u["a"])(d,a,s,!1,null,"59d0bced",null);t["default"]=f.exports},cb9b:function(e,t,i){"use strict";i("762c")},cfb1:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{ref:"addForm",attrs:{size:"lg",id:"modal-addForm--"+e.idModal,title:"Ajouter un champs dans cette etape","hide-footer":"","content-class":["mange-add-field"]},on:{ok:e.handleOk},model:{value:e.isOpen,callback:function(t){e.isOpen=t},expression:"isOpen"}},[i("form",{ref:"forme",on:{submit:e.handleSubmit,reset:e.resetModal,hidden:e.resetModal}},[i("b-row",{},[i("b-col",{attrs:{md:"6"}},[e.dynamicfield?e._e():i("b-form-group",{attrs:{label:"Sélectionner un type de champs","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:e.typeOptions,required:""},model:{value:e.field.type,callback:function(t){e.$set(e.field,"type",t)},expression:"field.type"}})],1),e.dynamicfield?i("b-form-group",{attrs:{label:"Formulaire","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:e.formItems,required:""},model:{value:e.typeFormId,callback:function(t){e.typeFormId=t},expression:"typeFormId"}})],1):e._e()],1),i("b-col",{attrs:{md:"6"}},[i("b-form-group",{attrs:{isOverride:e.isOverride}},[i("b-form-checkbox",{attrs:{switch:"",size:"lg"},model:{value:e.dynamicfield,callback:function(t){e.dynamicfield=t},expression:"dynamicfield"}},[e._v(" Champs dynamique ")])],1)],1)],1),i("div",{staticClass:"content-config-field"},[e.dynamicfield?e._e():i("input-option-form",{attrs:{type:e.field.type,field:e.field}}),e.dynamicfield?i("div",[i("hr"),i("b-form-group",{attrs:{label:"Sélectionner le champs dynamique","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:e.OptionDynamicsField},on:{change:e.selectDynamicLabel},model:{value:e.field.name,callback:function(t){e.$set(e.field,"name",t)},expression:"field.name"}})],1),i("compositeHeaderField",{attrs:{field:e.field}})],1):e._e()],1),i("b-row",{attrs:{"align-h":"end"}},[i("div",{staticClass:"mr-3"},[i("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[e._v(" "+e._s(e.nameButtonOk)+" ")])],1)])],1),i("pre",[e._v(" field "+e._s(e.field)+" ")])])},s=[],n=i("276c"),o=i("f3f3"),r=(i("a9e3"),i("159b"),i("b0c0"),i("2f62")),l=i("4fa8"),c=i("d3ee"),d=i("2c10"),u=i("f158"),f={components:{inputOptionForm:l["a"],compositeHeaderField:c["default"]},props:{nouveau:{type:Boolean,require:!0,default:!0},field:{type:Object,default:function(){return d["a"].field()}},genre:{type:String,default:""},idModal:{type:[String,Number],required:!0}},data:function(){return{isOpen:!1,typeFieldSelected:null,type:null,labelState:null,typeOptions:d["a"].typeOptions(),OptionDynamicsField:[],dynamicfield:!1,typeFormId:""}},watch:{dynamicfield:function(){this.watchDynamicFields()},typeFormId:function(){this.loadDynamicFields()}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(r["b"])(["formDatas"])),Object(r["c"])(["items","formId"])),{},{nameButtonOk:function(){return this.nouveau?"Ajouter":"Mettre à jour"},formItems:function(){var e=[];return this.items.forEach((function(t){e.push({text:t.name,value:t.id})})),e},isOverride:function(){return this.init(),!!this.field.override}}),methods:{init:function(){this.typeFormId=this.formId,this.field.override&&(this.dynamicfield=!0)},optionAddToFields:function(){var e=function e(t){Object(n["a"])(this,e),this.hauteur=t},t=new e(this.field),i={};for(var a in t.hauteur)i[a]=t.hauteur[a];this.formDatas.fields.push(i),d["a"].resetField(this.field)},resetModal:function(){this.type=null},handleOk:function(e){e.preventDefault(),this.handleSubmit()},handleSubmit:function(e){var t=this;e.preventDefault(),this.isOpen=!this.isOpen,this.nouveau&&this.optionAddToFields(),this.$emit("input_to_add",this.field),this.$nextTick((function(){t.$bvModal.hide("modal-prevent-closing")}))},watchDynamicFields:function(){this.dynamicfield?this.loadDynamicFields():this.typeOptions=d["a"].typeOptions()},loadDynamicFields:function(){var e=this;console.log("loadDynamicFields");var t=" select * from appformmanager_fields ";this.typeFormId&&(t+=" where formid='"+this.typeFormId+"'"),u["a"].getData(t).then((function(t){var i=[];t.data.forEach((function(e){var t=JSON.parse(e.jsonfield);i.push({value:e.machine_name,text:t.label})})),e.OptionDynamicsField=i}))},selectDynamicLabel:function(e){var t=this;this.OptionDynamicsField.forEach((function(i){i.value==e&&(t.field.label=i.text)}))}}},m=f,p=(i("f67f"),i("2877")),b=Object(p["a"])(m,a,s,!1,null,null,null);t["default"]=b.exports},ee83:function(e,t,i){"use strict";i("75eb")},f67f:function(e,t,i){"use strict";i("64d1")}}]);
//# sourceMappingURL=appForm.umd.min.8.js.map