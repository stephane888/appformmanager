(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[8],{3734:function(t,e,a){"use strict";a("54f5")},"3db8":function(t,e,a){"use strict";a("b1ee")},"54f5":function(t,e,a){},b1ee:function(t,e,a){},ca0f:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-container",{staticClass:"p-md-",attrs:{fluid:"lg"}},[a("b-row",{attrs:{"align-h":"center"}},[t.formDatas&&t.formDatas.info?a("b-col",{attrs:{cols:"12",lg:"10"}},[a("transition",{attrs:{name:"fade"}},[a("div",[a("title-bar",{attrs:{conf:{col:!0,text:"Gestion du formulaire"},id:t.id}}),a("nav-line",{attrs:{taille:t.id}}),a("pages",{attrs:{level:t.stepsIndex}})],1)])],1):t._e(),t.$store.state.mode?a("b-col",{attrs:{cols:"12",lg:"2"}},[a("div",{staticClass:"block-button"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"shadow-md d-block w-100",attrs:{variant:"light",squared:""}},[t._v(" Configuration ")]),a("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"light"},on:{click:t.clearFormDatas}},[t._v(" Ajouter une etape ")]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.re-order-stepes",modifiers:{"re-order-stepes":!0}}],staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"light"}},[t._v(" Re-ordonner les etapes ")]),a("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"secondary"},on:{click:t.resetValue}},[t._v(" Reset value ")]),a("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"success"},on:{click:t.saveToLocal}},[t._v(" Enregistrer ")]),a("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"dark"},on:{click:t.exportJson}},[t._v(" Export to json ")]),a("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Edition du formulaire","hide-footer":""},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[t.formDatas&&t.formDatas.info?a("form",{ref:"form",on:{submit:t.handleSubmit,reset:t.resetModal}},[a("b-row",[a("b-col",{attrs:{cols:"8"}},[a("b-form-group",{attrs:{label:"name","label-for":"name-input"}},[a("b-form-input",{attrs:{id:"db-input",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("b-col",{attrs:{cols:"8"}},[a("b-form-group",{attrs:{label:"Id","label-for":"description-input"}},[a("b-form-input",{attrs:{id:"desc-input-id"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1)],1),a("b-col",{attrs:{cols:"8"}},[a("b-form-group",{attrs:{label:"Description","label-for":"description-input"}},[a("b-form-textarea",{attrs:{id:"desc-input",required:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),a("b-col",{attrs:{cols:"12"}},[a("b-form-group",{attrs:{label:"image","label-for":"description-input"}},[a("UploadImage",{attrs:{field:t.form}})],1)],1)],1),a("hr",{staticClass:"my-3"}),a("b-row",{attrs:{"align-h":"end"}},[a("div",{staticClass:"mr-3"},[a("b-button",{staticClass:"mr-2"},[t._v(" export ")]),a("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[t._v(" Mise à jour ")])],1)])],1):t._e()])],1)]):t._e()],1)],1),a("reOrderStepes")],1)},o=[],r=a("5530"),n=(a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("a434"),a("2b3d"),a("a15b"),a("caad"),a("acc4")),i=a("f158"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"nav-line"},t._l(t.idLevel,(function(e,s){return a("div",{key:s,staticClass:"w-100"},[a("b-button",{staticClass:"nav-line__nav",class:s==t.stepsIndex?"nav-line__nav--dark":"nav-line__nav--normal",attrs:{title:"Etape "+s,variant:"primary",id:"tooltip-1"+s},on:{click:function(e){return t.loadSteps(s)}}}),a("b-tooltip",{attrs:{target:"tooltip-1"+s,triggers:"hover",variant:"info"}},[a("b",[t._v("etape "+t._s(s))]),t._v(" "),a("br"),a("div",[t._v(t._s(t.form.forms[s].info.title))])])],1)})),0)},d=[],c=(a("a9e3"),a("2f62")),u={props:{taille:{require:!0}},components:{},data:function(){return{value:1}},watch:{taille:function(){}},mounted:function(){var t=localStorage.getItem("step"),e=localStorage.getItem("id");null!==e&&t.length&&e==this.taille?this.$store.state.stepsIndex=Number(t):this.$store.state.stepsIndex=0},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["c"])(["stepsIndex"])),Object(c["b"])(["form"])),{},{idLevel:function(){var t=[];if(this.form.forms.length)for(var e in this.form.forms)t.push(e);return t}}),methods:{loadSteps:function(t){this.$store.state.stepsIndex=t,localStorage.setItem("step",t),localStorage.setItem("id",this.taille)}}},f=u,m=(a("3734"),a("2877")),p=Object(m["a"])(f,l,d,!1,null,null,null),b=p.exports,v=a("0b91"),h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-modal",{ref:"modal",attrs:{id:"re-order-stepes",title:"Re-ordonner les etapes","hide-footer":"",size:"lg"}},[a("b-list-group",t._l(t.form.forms,(function(e,s){return a("b-list-group-item",{key:s},[a("div",{staticClass:"d-flex align-items-center"},[a("b-button",{staticClass:"border-0",attrs:{variant:"outline-info"},on:{click:function(e){return t.modeToUp(s)}}},[a("b-icon",{attrs:{icon:"arrow-bar-up"}})],1),a("b-button",{staticClass:"border-0",attrs:{variant:"outline-info"},on:{click:function(e){return t.moveToDown(s)}}},[a("b-icon",{attrs:{icon:"arrow-bar-down"}})],1),a("div",{staticClass:"pl-5",class:[e.states&&e.states.length>0?"ml-5":""]},[t._v(" "+t._s(s)+" : "+t._s(e.info.title)+" "),e.states&&e.states.length>0?a("div",t._l(e.states,(function(e,s){return a("div",{key:s},[a("small",[t._v(" "+t._s(t.getNameStep(e.state_name))+" ")])])})),0):t._e()])],1)])})),1),a("div",{staticClass:"justify-content-end d-flex"},[a("div",{staticClass:"mx-2 my-4"},[a("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(e){return t.$bvModal.hide("re-order-stepes")}}},[t._v(" Mettre à jour ")])],1)])],1)],1)},g=[],_=(a("b0c0"),a("2c10")),w={name:"reOrderStepes",props:{},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:Object(r["a"])({},Object(c["b"])(["form"])),methods:{moveToDown:function(t){var e=t+1;_["a"].array_move(this.form.forms,t,e)},modeToUp:function(t){var e=t-1;_["a"].array_move(this.form.forms,t,e)},getNameStep:function(t){for(var e in this.form.forms)if(this.form.forms[e].info.name===t)return this.form.forms[e].info.title}}},x=w,S=Object(m["a"])(x,h,g,!1,null,"805956ce",null),k=S.exports,D={components:{pages:v["a"],NavLine:b,reOrderStepes:k,TitleBar:n["a"],UploadImage:function(){return Promise.all([a.e(1),a.e(5)]).then(a.bind(null,"9353"))}},props:{id:{type:String,required:!0}},data:function(){return{datasBd:[],stepsId:1,demo:!0,title:"",datasBase:{description:"",id:null,forms:"",name:""}}},watch:{stepsId:function(){this.datasBdOrLocalStorage()}},mounted:function(){this.$store.dispatch("setFormId",this.id)},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(c["c"])(["stepsIndex","allStepsDatas","fields","price","mode","priceAide"])),Object(c["b"])(["form","formDatas"])),{},{currentSteps:function(){var t=localStorage.getItem("allo"),e=JSON.parse(t);return null!=e&&e.length?e[this.$store.state.stepsIndex]:this.formDatas},stepsDatas:function(){var t=this.datasBd;return this.datasBd.length?(console.log("object io",t[this.stepsId-1]),t[this.stepsId-1]):"vide"}}),methods:{deleteSteps:function(t){var e=this.$store.state.allStepsDatas,a=e.indexOf(this.formDatas);this.$emit("index-to-delete",a),console.log("de",t);for(var s=e.length-1;s>=0;s--)s===a&&(e.splice(s,1),console.log("iiippp"))},datasBdOrLocalStorage:function(){var t=localStorage.getItem("allo"),e=JSON.parse(t);if(console.log("loaaaa",e),"vide"!=this.stepsDatas){this.datasBase=this.stepsDatas,console.log("aaa",this.datasBase);var a=JSON.parse(this.datasBase.forms);this.$store.state.allStepsDatas=a,this.$store.state.formDatas=this.allStepsDatas[this.$store.state.stepsIndex]}else null!=e&&e.length?(console.log("appppaaa",e),this.$store.state.allStepsDatas=e,this.$store.state.formDatas=this.allStepsDatas[this.$store.state.stepsIndex]):"vide"==this.stepsDatas&&alert("Désolé nous n'avons pas pue accéder à la BD  et vous n'avez aucune données dans votre localStorage")},saveToLocal:function(){var t=this;i["a"].prepareDatasToSave(this.form).then((function(e){i["a"].saveForm(e,t.mode).then((function(){}))}))},exportJson:function(){var t=window.prompt("Veuillez renseigner le nom du fichier","test").toLowerCase(),e=JSON.stringify(this.form),a=new Blob([e],{type:"text/plain"}),s=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=t+".json",o.href=window.URL.createObjectURL(a),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),s.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(s)},clearFormDatas:function(){var t={info:{headerTitle:"",title:"",name:""},fields:[]};this.form.forms.push(t),this.$store.state.stepsIndex=this.form.forms.length-1},resetValue:function(){var t=["radio","text","select","number","radiodesc","codepostal"],e=["checkbox"];for(var a in this.formDatas.fields){var s=this.formDatas.fields[a];t.includes(s.type)?s.value=null:e.includes(s.type)?s.value=[]:"userlogin"===s.type&&(s.value=null)}},resetModal:function(){},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(t){var e=this;t.preventDefault(),this.demo=!0,this.saveToLocal(),this.$nextTick((function(){e.$bvModal.hide("modal-prevent-closing")}))}}},O=D,j=(a("3db8"),Object(m["a"])(O,s,o,!1,null,null,null));e["default"]=j.exports}}]);
//# sourceMappingURL=appForm.umd.min.8.js.map