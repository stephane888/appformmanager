(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[25],{3684:function(t,e,i){"use strict";i("ce14")},abee:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("title-bar",{attrs:{conf:{col:!0,text:"Gestion des champs"}}}),i("Filtre",{attrs:{listForms:t.listForms}}),i("tableauChamps",{attrs:{listForms:t.listForms}})],1)},o=[],s=(i("159b"),i("b0c0"),i("63c9")),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-form",{staticClass:"mb-5"},[i("b-row",[i("b-col",{attrs:{md:"4"}},[i("b-form-group",{attrs:{label:"Grouper par formulaire.","label-for":"type-input","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:t.listForms},on:{change:t.SelectionForm},model:{value:t.$store.state.filtre.formid,callback:function(e){t.$set(t.$store.state.filtre,"formid",e)},expression:"$store.state.filtre.formid"}})],1)],1),i("b-col",{staticClass:"d-flex align-items-end pb-md-3 justify-content-end",attrs:{md:"8"}},[i("b-button",{staticClass:"mt-3 mr-3",attrs:{variant:"outline-info"},on:{click:t.OpenModalAddField}},[t._v(" + Ajouter un champs ")]),i("b-button",{staticClass:"mt-3 mr-3",attrs:{variant:"outline-info"}},[t._v(" + Exporter ")]),i("b-button",{staticClass:"mt-3",attrs:{variant:"outline-info"}},[t._v(" + Importer ")])],1)],1)],1),i("AddForm",{attrs:{listForms:t.listForms,defaultFormid:t.$store.state.filtre.formid,field:t.field,idModal:"filter"},on:{set_default_field:t.set_default_field}})],1)},a=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{ref:"addForm",attrs:{size:"lg",id:"modal-addForm--"+t.idModal,title:"Ajouter des champs dans l'etape","hide-footer":"","content-class":["mange-add-field"]},on:{ok:t.handleOk}},[i("loaderIcon",{attrs:{busy:t.busy}}),i("form",{ref:"forme",on:{submit:t.handleSubmit,reset:t.resetModal,hidden:t.resetModal}},[i("b-row",[i("b-col",{attrs:{cols:"6"}},[i("b-form-group",{attrs:{label:"Sélectionner un model de base","label-for":"type-input","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:t.typeOptions,id:"type-input",required:""},model:{value:t.field.type,callback:function(e){t.$set(t.field,"type",e)},expression:"field.type"}})],1)],1),i("b-col",{attrs:{cols:"6"}},[i("b-form-group",{attrs:{label:"Accosier à un formulaire","label-for":"type-input","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:t.listForms,id:"type-input-2",required:""},model:{value:t.field.formid,callback:function(e){t.$set(t.field,"formid",e)},expression:"field.formid"}})],1)],1)],1),i("input-option-form",{staticClass:"content-config-field",attrs:{type:t.field.type,fields:t.field}}),i("b-row",{attrs:{"align-h":"end"}},[i("div",{staticClass:"mt-3 mx-3"},[i("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary",disabled:!(t.field.name.length>2)}},[t._v(" "+t._s(t.nameButtonOk)+" ")])],1)])],1),i("pre",[t._v(" "+t._s(t.field)+" ")])],1)},d=[],u=i("f3f3"),c=(i("a9e3"),i("2f62")),f=i("4fa8"),m=i("021a"),p=i("2c10"),b=i("f158"),h={components:{inputOptionForm:f["a"],loaderIcon:m["a"]},props:{field:{type:Object,required:!0},genre:{type:String,default:""},listForms:{type:Array,required:!0},defaultFormid:{type:String,default:null},idModal:{type:[String,Number],required:!0}},data:function(){return{typeFieldSelected:null,type:null,labelState:null,typeOptions:p["a"].typeOptions(),busy:!1}},computed:Object(u["a"])(Object(u["a"])({},Object(c["b"])(["formDatas","uid"])),{},{nameButtonOk:function(){return this.field.id?"Mettre à jour":"Ajouter"}}),watch:{defaultFormid:function(t){var e=this;this.listForms.forEach((function(i){i.value===t&&(e.field.formid=i.value)}))}},methods:{resetModal:function(){this.type=null},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(t){var e=this;this.busy=!0,t.preventDefault(),b["a"].prepareFieldToSave(this.field,this.uid).then((function(t){b["a"].saveForm(t).then((function(t){console.log("resp : ",t),t.data&&t.data.forEach((function(t){e.$store.dispatch("GetFields",{id:t.result}).then((function(){e.busy=!1,e.$emit("set_default_field"),e.$nextTick((function(){e.$bvModal.hide("modal-addForm--"+e.idModal)}))}))}))})).catch((function(){e.busy=!1}))}))}}},v=h,y=(i("3684"),i("2877")),F=Object(y["a"])(v,n,d,!1,null,null,null),_=F.exports,k={created:function(){},name:"Filtres",props:{listForms:{type:Array,required:!0}},components:{AddForm:_},data:function(){return{field:p["a"].field()}},methods:{OpenModalAddField:function(){this.$bvModal.show("modal-addForm--filter")},set_default_field:function(){this.field=p["a"].field()},SelectionForm:function(t){this.$store.state.filtre.formid=t,this.$store.dispatch("GetFields")}}},O=k,$=Object(y["a"])(O,l,a,!1,null,null,null),g=$.exports,x=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-table",{attrs:{hover:"",small:"","caption-top":"",responsive:"",bordered:"",busy:t.loaders.GestionField,items:t.fieldsRender,fields:t.fieldsName},scopedSlots:t._u([{key:"table-busy",fn:function(){return[i("loaderIcon",{attrs:{busy:t.loaders.GestionField}})]},proxy:!0},{key:"cell(actions)",fn:function(e){return[i("buttonAction",{attrs:{row:e,listForms:t.listForms}})]}},{key:"cell(formid)",fn:function(e){return[t._v(" "+t._s(t.getStringValue(e.value))+" ")]}},{key:"cell(value)",fn:function(e){return[i(t.templateRender(e.item.type),{tag:"component",attrs:{field:e.item}})]}}])})],1)},j=[],C=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"boutton-absolute d-flex"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-info",modifiers:{hover:!0,"v-info":!0}}],staticClass:"border-0",attrs:{size:"md",variant:"outline-info",title:"Editer le champs"},on:{click:t.editerField}},[i("b-icon",{attrs:{icon:"pencil-square","aria-hidden":"true"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-info",modifiers:{hover:!0,"v-info":!0}}],staticClass:"border-0",attrs:{size:"md",variant:"outline-secondary",title:"cloner le champs"},on:{click:function(e){return t.$emit("cloner-field",t.row)}}},[i("b-icon",{attrs:{icon:"clipboard-plus","aria-hidden":"true"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-danger",modifiers:{hover:!0,"v-danger":!0}}],staticClass:"border-0",attrs:{size:"md",variant:"outline-danger",title:"Supprimer le champs"},on:{click:t.deleteField}},[i("b-icon",{attrs:{icon:"trash-fill","aria-hidden":"true"}})],1),i("AddForm",{attrs:{listForms:t.listForms,defaultFormid:t.field.formid,field:t.field,idModal:"edit"+t.row.index}})],1)},w=[],A=(i("a434"),{name:"tableauChampsAction",props:{row:{type:Object},listForms:{type:Array}},components:{AddForm:_},computed:{field:function(){return this.row?this.row.item:{}}},methods:{editerField:function(){this.$bvModal.show("modal-addForm--edit"+this.row.index)},deleteField:function(){var t=this;b["a"].modalConfirmDelete().then((function(){t.$store.state.loaders.GestionField=!0,b["a"].deleteField(t.row.item).then((function(){t.$store.state.fields.splice(t.row.index,1),t.$store.state.loaders.GestionField=!1}))}))}}}),S=A,M=Object(y["a"])(S,C,w,!1,null,null,null),q=M.exports,E=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-list-group",{staticClass:"list-small"},t._l(t.field.options,(function(e,r){return i("b-list-group-item",{key:r,staticClass:"item-vertical"},[i("div",{staticClass:"d-flex"},[i("span",{staticClass:"item"},[t._v(t._s(e.text))]),i("span",{staticClass:"item"},[t._v(t._s(e.cout)+" €")])])])})),1)],1)},G=[],N={name:"radio",props:{field:{type:Object,required:!0}}},D=N,z=Object(y["a"])(D,E,G,!1,null,null,null),I=z.exports,R={name:"tableauChamps",props:{listForms:{type:Array,required:!0}},components:{buttonAction:q,radio:I},data:function(){return{fieldsName:[{key:"formid",label:"Group de champs"},{key:"label",sortable:!1,label:"Etiquetes"},{key:"value",label:"Prix",sortable:!0},{key:"type",label:"Type"},{key:"actions",label:"#Actions",class:["position-relative"]}]}},mounted:function(){this.$store.dispatch("GetFields")},computed:Object(u["a"])(Object(u["a"])({},Object(c["c"])(["fields","filtre","loaders"])),{},{fieldsRender:function(){var t=[];return this.fields.forEach((function(e){t.push(Object(u["a"])(Object(u["a"])({},JSON.parse(e.jsonfield)),{},{id:e.id}))})),t}}),methods:{getStringValue:function(t){for(var e in this.listForms){var i=this.listForms[e];if(i.value===t)return i.text}},templateRender:function(t){var e="";switch(t){case"radio":e=I;break;case"checkbox":e=I;break;default:break}return e}}},T=R,B=Object(y["a"])(T,x,j,!1,null,null,null),J=B.exports,V={name:"GestionFields",components:{TitleBar:s["a"],Filtre:g,tableauChamps:J},data:function(){return{listForms:[]}},mounted:function(){var t=this;this.$store.dispatch("loadFormsDatas").then((function(){t.$store.state.items.forEach((function(e){t.listForms.push({value:e.id,text:e.name})}))}))}},P=V,H=Object(y["a"])(P,r,o,!1,null,null,null);e["default"]=H.exports},ce14:function(t,e,i){}}]);
//# sourceMappingURL=appForm.umd.min.25.js.map