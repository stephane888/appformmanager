(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[20],{3684:function(t,e,i){"use strict";i("ce14")},"63c9":function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",{attrs:{"align-h":"center"}},[s("b-col",{attrs:{lg:t.conf.col?"12":"10",cols:"12"}},[s("div",{staticClass:"block-title pr-2"},[s("div",{staticClass:"backButton",attrs:{to:"/"},on:{click:t.returnHome}},[s("img",{attrs:{src:i("6416"),alt:"",width:"55px",height:"30px"}})]),s("h5",{staticClass:"m-0"},[t._v(" "+t._s(t.conf.text)+" "),t.form.name?s("span",{staticClass:"form-title"},[t._v(" : "+t._s(t.form.name))]):t._e()]),s("div",[s("h5",{directives:[{name:"show",rawName:"v-show",value:t.showDevis,expression:"showDevis"}],staticClass:"m-0",class:t.uid?"title-right":"",on:{click:t.seeDevis}},[t.uid?s("span",[t._v(" Voir mes devis")]):t._e()])])])])],1)},o=[],r=i("f3f3"),a=i("2f62"),l={props:{showDevis:{type:Boolean,default:!0},conf:{type:Object,default:function(){return{col:!1,text:"Estimation de devis"}}}},data:function(){return{value:1}},computed:Object(r["a"])(Object(r["a"])({},Object(a["c"])(["stepsIndex","form"])),Object(a["b"])(["uid"])),methods:{returnHome:function(){this.$router.push({path:"/"})},seeDevis:function(){this.$router.push({path:"/traitement-my-own/".concat(this.id)})}}},n=l,d=i("2877"),c=Object(d["a"])(n,s,o,!1,null,null,null);e["a"]=c.exports},6416:function(t,e,i){t.exports=i.p+"img/long-arrow-alt-left-solid.d9d4427b.svg"},abee:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("title-bar",{attrs:{conf:{col:!0,text:"Gestion des champs"}}}),i("Filtre",{attrs:{listForms:t.listForms}}),i("tableauChamps",{attrs:{listForms:t.listForms}})],1)},o=[],r=(i("159b"),i("b0c0"),i("63c9")),a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-form",{staticClass:"mb-5"},[i("b-row",[i("b-col",{attrs:{md:"4"}},[i("b-form-group",{attrs:{label:"Grouper par formulaire.","label-for":"type-input","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:t.listForms},on:{change:t.SelectionForm},model:{value:t.$store.state.filtre.formid,callback:function(e){t.$set(t.$store.state.filtre,"formid",e)},expression:"$store.state.filtre.formid"}})],1)],1),i("b-col",{staticClass:"d-flex align-items-end pb-md-3 justify-content-end",attrs:{md:"8"}},[i("b-button",{staticClass:"mt-3 mr-3",attrs:{variant:"outline-info"},on:{click:t.OpenModalAddField}},[t._v(" + Ajouter un champs ")]),i("b-button",{staticClass:"mt-3 mr-3",attrs:{variant:"outline-info"}},[t._v(" + Exporter ")]),i("b-button",{staticClass:"mt-3",attrs:{variant:"outline-info"}},[t._v(" + Importer ")])],1)],1)],1),i("AddForm",{attrs:{listForms:t.listForms,defaultFormid:t.$store.state.filtre.formid,field:t.field,idModal:"filter"},on:{set_default_field:t.set_default_field}})],1)},l=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{attrs:{size:"lg",id:"modal-addForm--"+t.idModal,title:"Ajouter un champs dans le gestionnaire de champs","hide-footer":"","content-class":["mange-add-field"]},on:{ok:t.handleOk}},[i("loaderIcon",{attrs:{busy:t.busy}}),i("form",{ref:"forme",on:{submit:t.handleSubmit,reset:t.resetModal,hidden:t.resetModal}},[i("b-row",[i("b-col",{attrs:{cols:"6"}},[i("b-form-group",{attrs:{label:"Sélectionner un model de base","label-for":"type-input","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:t.typeOptions,id:"type-input",required:""},model:{value:t.field.type,callback:function(e){t.$set(t.field,"type",e)},expression:"field.type"}})],1)],1),i("b-col",{attrs:{cols:"6"}},[i("b-form-group",{attrs:{label:"Accosier à un formulaire","label-for":"type-input","invalid-feedback":"type is required",description:"Cela permet de grouper ce champs avec le formulaire selectionné"}},[i("b-form-select",{attrs:{options:t.listForms,id:"type-input-2",required:""},model:{value:t.field.formid,callback:function(e){t.$set(t.field,"formid",e)},expression:"field.formid"}})],1)],1)],1),i("input-option-form",{staticClass:"content-config-field",attrs:{type:t.field.type,field:t.field}}),i("b-row",{attrs:{"align-h":"end"}},[i("div",{staticClass:"mt-3 mx-3"},[i("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary",disabled:!(t.field.name.length>2)}},[t._v(" "+t._s(t.nameButtonOk)+" ")])],1)])],1)],1)},d=[],c=i("f3f3"),u=(i("a9e3"),i("2f62")),f=i("4fa8"),m=i("021a"),p=i("2c10"),b=i("f158"),h={components:{inputOptionForm:f["a"],loaderIcon:m["a"]},props:{field:{type:Object,required:!0},genre:{type:String,default:""},listForms:{type:Array,required:!0},defaultFormid:{type:String,default:null},idModal:{type:[String,Number],required:!0}},data:function(){return{typeFieldSelected:null,type:null,labelState:null,typeOptions:p["a"].typeOptions(),busy:!1}},computed:Object(c["a"])(Object(c["a"])({},Object(u["b"])(["formDatas","uid"])),{},{nameButtonOk:function(){return this.field.id?"Mettre à jour":"Ajouter"}}),watch:{defaultFormid:function(t){var e=this;this.listForms.forEach((function(i){i.value===t&&(e.field.formid=i.value)}))}},methods:{resetModal:function(){this.type=null},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(t){var e=this;this.busy=!0,t.preventDefault(),b["a"].prepareFieldToSave(this.field,this.uid).then((function(t){b["a"].saveForm(t).then((function(t){console.log("resp : ",t),t.data&&t.data.forEach((function(t){e.$store.dispatch("GetFields",{id:t.result}).then((function(){e.busy=!1,e.$emit("set_default_field"),e.$nextTick((function(){e.$bvModal.hide("modal-addForm--"+e.idModal)}))}))}))})).catch((function(){e.busy=!1}))}))}}},v=h,y=(i("3684"),i("2877")),F=Object(y["a"])(v,n,d,!1,null,null,null),_=F.exports,k={created:function(){},name:"Filtres",props:{listForms:{type:Array,required:!0}},components:{AddForm:_},data:function(){return{field:p["a"].field()}},methods:{OpenModalAddField:function(){this.$bvModal.show("modal-addForm--filter")},set_default_field:function(){this.field=p["a"].field()},SelectionForm:function(t){this.$store.state.filtre.formid=t,this.$store.dispatch("GetFields")}}},g=k,O=Object(y["a"])(g,a,l,!1,null,null,null),x=O.exports,w=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-table",{attrs:{hover:"",small:"","caption-top":"",responsive:"",bordered:"",busy:t.loaders.GestionField,items:t.fieldsRender,fields:t.fieldsName},scopedSlots:t._u([{key:"table-busy",fn:function(){return[i("loaderIcon",{attrs:{busy:t.loaders.GestionField}})]},proxy:!0},{key:"cell(actions)",fn:function(e){return[i("buttonAction",{attrs:{row:e,listForms:t.listForms}})]}},{key:"cell(formid)",fn:function(e){return[t._v(" "+t._s(t.getStringValue(e.value))+" ")]}},{key:"cell(value)",fn:function(e){return[i(t.templateRender(e.item.type),{tag:"component",attrs:{field:e.item}})]}}])})],1)},$=[],j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"boutton-absolute d-flex"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-info",modifiers:{hover:!0,"v-info":!0}}],staticClass:"border-0",attrs:{size:"md",variant:"outline-info",title:"Editer le champs"},on:{click:t.editerField}},[i("b-icon",{attrs:{icon:"pencil-square","aria-hidden":"true"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-info",modifiers:{hover:!0,"v-info":!0}}],staticClass:"border-0",attrs:{size:"md",variant:"outline-secondary",title:"cloner le champs"},on:{click:function(e){return t.$emit("cloner-field",t.row)}}},[i("b-icon",{attrs:{icon:"clipboard-plus","aria-hidden":"true"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-danger",modifiers:{hover:!0,"v-danger":!0}}],staticClass:"border-0",attrs:{size:"md",variant:"outline-danger",title:"Supprimer le champs"},on:{click:t.deleteField}},[i("b-icon",{attrs:{icon:"trash-fill","aria-hidden":"true"}})],1),i("AddForm",{attrs:{listForms:t.listForms,defaultFormid:t.field.formid,field:t.field,idModal:"edit"+t.row.index}})],1)},C=[],A=(i("a434"),{name:"tableauChampsAction",props:{row:{type:Object},listForms:{type:Array}},components:{AddForm:_},computed:{field:function(){return this.row?this.row.item:{}}},methods:{editerField:function(){this.$bvModal.show("modal-addForm--edit"+this.row.index)},deleteField:function(){var t=this;b["a"].modalConfirmDelete().then((function(){t.$store.state.loaders.GestionField=!0,b["a"].deleteField(t.row.item).then((function(){t.$store.state.fields.splice(t.row.index,1),t.$store.state.loaders.GestionField=!1}))}))}}}),S=A,E=Object(y["a"])(S,j,C,!1,null,null,null),M=E.exports,q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-list-group",{staticClass:"list-small"},t._l(t.field.options,(function(e,s){return i("b-list-group-item",{key:s,staticClass:"item-vertical"},[i("div",{staticClass:"d-flex"},[i("span",{staticClass:"item"},[t._v(t._s(e.text))]),i("span",{staticClass:"item"},[t._v(t._s(e.cout)+" €")])])])})),1)],1)},G=[],D={name:"radio",props:{field:{type:Object,required:!0}}},N=D,B=Object(y["a"])(N,q,G,!1,null,null,null),I=B.exports,z={name:"tableauChamps",props:{listForms:{type:Array,required:!0}},components:{buttonAction:M,radio:I},data:function(){return{fieldsName:[{key:"formid",label:"Group de champs"},{key:"label",sortable:!1,label:"Etiquetes"},{key:"value",label:"Prix",sortable:!0},{key:"type",label:"Type"},{key:"actions",label:"#Actions",class:["position-relative"]}]}},mounted:function(){this.$store.dispatch("GetFields")},computed:Object(c["a"])(Object(c["a"])({},Object(u["c"])(["fields","filtre","loaders"])),{},{fieldsRender:function(){var t=[];return this.fields.forEach((function(e){t.push(Object(c["a"])(Object(c["a"])({},JSON.parse(e.jsonfield)),{},{id:e.id}))})),t}}),methods:{getStringValue:function(t){for(var e in this.listForms){var i=this.listForms[e];if(i.value===t)return i.text}},templateRender:function(t){var e="";switch(t){case"radio":e=I;break;case"checkbox":e=I;break;default:break}return e}}},R=z,T=Object(y["a"])(R,w,$,!1,null,null,null),J=T.exports,V={name:"GestionFields",components:{TitleBar:r["a"],Filtre:x,tableauChamps:J},data:function(){return{listForms:[]}},mounted:function(){var t=this;this.$store.dispatch("loadFormsDatas").then((function(){t.$store.state.items.forEach((function(e){t.listForms.push({value:e.id,text:e.name})}))}))}},H=V,P=Object(y["a"])(H,s,o,!1,null,null,null);e["default"]=P.exports},ce14:function(t,e,i){}}]);
//# sourceMappingURL=appForm.umd.min.20.js.map