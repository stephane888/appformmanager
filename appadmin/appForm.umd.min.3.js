(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[3],{"408a":function(t,e){var s=1..valueOf;t.exports=function(t){return s.call(t)}},5784:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex flex-column justify-content-center text-center"},[t.diplayLabel?s("div",[s("div",{staticClass:"icon"},[s("b-icon",{attrs:{icon:"shield","font-scale":"1.7"}})],1)]):t._e(),t.diplayLabel?s("div",{staticClass:"label-field"},[t._v("Ville")]):t._e(),s("div",{staticClass:"field-content"},[t._v(t._s(t.value))])])},i=[],r={name:"codePostal",props:{field:{type:Object,required:!0},diplayLabel:{type:Boolean}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{value:function(){return this.field.value&&this.field.value.text?this.field.value.text:""}},methods:{}},n=r,o=s("2877"),l=Object(o["a"])(n,a,i,!1,null,"11b3d658",null),c=l.exports,u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex flex-column justify-content-center text-center",attrs:{"data-render":"default-render"}},[t.diplayLabel?s("div",[s("div",{staticClass:"icon"},[s("b-icon",{attrs:{icon:"cloud-download","font-scale":"1.7"}})],1)]):t._e(),t.diplayLabel?s("div",{staticClass:"label-field"},[t._v(" "+t._s(t.field.label)+" ")]):t._e(),s("div",{staticClass:"field-content"},[t._v(t._s(t.field.value))])])},d=[],f={name:"defaultRender.vue",props:{field:{type:Object,required:!0},diplayLabel:{type:Boolean,default:!1}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{},methods:{}},m=f,p=Object(o["a"])(m,u,d,!1,null,"27a98904",null),h=p.exports,v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex flex-column justify-content-center text-center",attrs:{"data-render":"select"}},[t.diplayLabel?s("div",[s("div",{staticClass:"icon"},[s("b-icon",{attrs:{icon:"box","font-scale":"1.7"}})],1)]):t._e(),t.diplayLabel?s("div",{staticClass:"label-field"},[t._v(" "+t._s(t.field.label)+" ")]):t._e(),s("ul",{staticClass:"m-0 p-0 pl-4 field-content"},t._l(t.getValue,(function(e,a){return s("li",{key:a},[t._v(" "+t._s(e)+" ")])})),0)])},b=[],_=s("0122"),g={name:"select",props:{field:{type:Object,required:!0},diplayLabel:{type:Boolean,default:!1}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{getValue:function(){var t=[];if(this.field.value){var e=Object(_["a"])(this.field.value);if("object"===e)for(var s in this.field.value)t.push(this.getTextInOptions(this.field.value[s]));else t.push(this.getTextInOptions(this.field.value))}return t}},methods:{getTextInOptions:function(t){for(var e in this.field.options)if(this.field.options[e].value===t)return this.field.options[e].text}}},y=g,C=Object(o["a"])(y,v,b,!1,null,"51b877b5",null),I=C.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"d-flex flex-column justify-content-center text-center",attrs:{"data-render":"recapitulatif"}},[s("div",[s("div",{staticClass:"icon"},[s("b-icon",{attrs:{icon:"credit-card","font-scale":"1.7"}})],1)]),t.diplayLabel?s("div",{staticClass:"label-field"},[t._v(t._s(t.field.label))]):t._e(),s("strong",{staticClass:"field-content"},[t._v(" "+t._s(t.priceEstimation)+" €")])])},x=[],w={name:"recapitulatif",props:{field:{type:Object,required:!0},diplayLabel:{type:Boolean,default:!1}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{priceEstimation:function(){var t=this.field.prix.cout;if(t>0&&this.field.percent){var e=parseInt(this.field.percent);if(e>0)return e=t*e/100+t,t+" - "+e}return t}},methods:{}},D=w,F=Object(o["a"])(D,k,x,!1,null,"04822240",null),j=F.exports,O=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"m-0 p-0 pl-4"},t._l(t.currentDevisDisplay,(function(e,a){return s("li",{key:a,staticClass:"d-flex"},[s("strong",{staticClass:"value"},[t._v(" "+t._s(e.text)+" ")])])})),0)])},T=[],E={name:"userlogin",props:{field:{type:Object,required:!0},currentDevis:{type:Object}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{currentDevisDisplay:function(){return this.currentDevis&&this.currentDevis.user?this.currentDevis.user:[]}},methods:{}},S=E,N=Object(o["a"])(S,O,T,!1,null,"3910144a",null),$=N.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("ul",{staticClass:"m-0 p-0 pl-4"},t._l(t.value,(function(e,a){return s("li",{key:a},[s("a",{attrs:{href:e.url,download:e.filename}},[t._v(t._s(e.filename))])])})),0)])},M=[],L={name:"file",props:{field:{type:Object,required:!0}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{value:function(){return this.field.value.length?this.field.value:[]}},methods:{}},V=L,U=Object(o["a"])(V,A,M,!1,null,"a02ae002",null),q=U.exports;e["a"]={getTemplatesFiles:function(t){var e=h;switch(t){case"codepostal":e=c;break;case"select":e=I;break;case"checkbox":e=I;break;case"radio":e=I;break;case"recapitulatif":e=j;break;case"userlogin":e=$;break;case"file":e=q;break}return e}}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var a=s("1d80"),i=s("577e"),r=s("5899"),n="["+r+"]",o=RegExp("^"+n+n+"*"),l=RegExp(n+n+"*$"),c=function(t){return function(e){var s=i(a(e));return 1&t&&(s=s.replace(o,"")),2&t&&(s=s.replace(l,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},"63c9":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",{attrs:{"align-h":"center"}},[a("b-col",{attrs:{lg:t.conf.col?"12":"10",cols:"12"}},[a("div",{staticClass:"block-title pr-2"},[a("div",{staticClass:"backButton",attrs:{to:"/"},on:{click:t.returnHome}},[a("img",{attrs:{src:s("6416"),alt:"",width:"55px",height:"30px"}})]),a("h5",{staticClass:"m-0"},[t._v(" "+t._s(t.conf.text)+" "),t.form.name?a("span",{staticClass:"form-title"},[t._v(" : "+t._s(t.form.name))]):t._e()]),a("div",[a("h5",{directives:[{name:"show",rawName:"v-show",value:t.showDevis,expression:"showDevis"}],staticClass:"m-0",class:t.uid?"title-right":"",on:{click:t.seeDevis}},[t.uid?a("span",[t._v(" Voir mes devis")]):t._e()])])])])],1)},i=[],r=s("f3f3"),n=s("2f62"),o={props:{showDevis:{type:Boolean,default:!0},conf:{type:Object,default:function(){return{col:!1,text:"Estimation de devis"}}}},data:function(){return{value:1}},computed:Object(r["a"])(Object(r["a"])({},Object(n["c"])(["stepsIndex","form"])),Object(n["b"])(["uid"])),methods:{returnHome:function(){this.$router.push({path:"/"})},seeDevis:function(){this.$router.push({path:"/traitement-my-own/".concat(this.id)})}}},l=o,c=s("2877"),u=Object(c["a"])(l,a,i,!1,null,null,null);e["a"]=u.exports},6416:function(t,e,s){t.exports=s.p+"img/long-arrow-alt-left-solid.d9d4427b.svg"},7156:function(t,e,s){var a=s("1626"),i=s("861d"),r=s("d2bb");t.exports=function(t,e,s){var n,o;return r&&a(n=e.constructor)&&n!==s&&i(o=n.prototype)&&o!==s.prototype&&r(t,o),t}},"8bba":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("loader-icon",{attrs:{busy:t.isBusy}}),t.isBusy?t._e():s("div",{staticClass:"titre-project-resume"},[s("b-col",{staticClass:"notif",attrs:{cols:"12",md:"5",lg:"3"}},[s("span",{staticClass:"notif-alert notif-at"},[t._v(t._s(t.nombreStatus.rappel.length))]),s("span",[t._v("projet en attente de rappel")])]),s("b-col",{staticClass:"notif",attrs:{cols:"12",md:"5",lg:"3"}},[s("span",{staticClass:"notif-alert notif-sa"},[t._v(t._s(t.nombreStatus.save.length))]),s("span",[t._v("projet sauvegardé,")])]),t.$store.state.mode?s("b-col",{staticClass:"notif",attrs:{cols:"12",md:"5",lg:"3"}},[s("span",{staticClass:"notif-ab notif-alert"},[t._v(t._s(t.nombreStatus.loose.length))]),s("span",[t._v("projet abandonné")])]):t._e()],1),t.isBusy?t._e():s("b-row",{staticClass:"list-block",attrs:{trigger_perfom:t.trigger_perfom}},t._l(t.traitementFormItemsDisplay,(function(e,a){return s("b-col",{key:a,attrs:{md:"12"}},[s("block",{attrs:{item:e,form:t.form,traitementFormItems:t.traitementFormItems,"data-id":a},on:{"get-valide-stepe":t.getValideStepe,"form-traiter":t.formTraiter,"get-info-user":t.getInfoUser}})],1)})),1),t.totalRows>20?s("b-pagination",{staticClass:"pt-5 pb-5 mt-5 mb-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},on:{change:t.changePagination},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e(),s("b-modal",{ref:"modal",staticClass:"super-hover",attrs:{id:"modal--closing",size:"lg",title:"Résultat du formulaire ...",scrollable:"",cancelTitle:"Quitter",okTitle:"Me rappeler"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("div",{staticClass:"d-flex"},[s("div",{staticClass:"w-100"},[s("b-button",{staticClass:"mr-3",attrs:{variant:"primary",size:"sm"},on:{click:function(e){return t.$bvModal.hide("modal--closing")}}},[t._v(" Quitter ")]),"1"!==t.currentDevis.status&&1!==t.currentDevis.status||!t.currentDevis.uid.includes(t.$store.getters.uid)?t._e():s("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(e){return t.updateStatus()}}},[t._v(" Me rappeler ")])],1)])]},proxy:!0}]),model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.traitementFormItems.length?s("b-row",{attrs:{"align-h":"center"}},t._l(t.validSteps2,(function(e,a){return s("b-col",{key:a,staticClass:"mb-4",attrs:{sm:"12"}},[void 0!==e?s("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[s("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[s("b-button",{attrs:{block:"",variant:"dark",disabled:""}},[t._v(" "+t._s(e.info.title)+" ")])],1),s("b-collapse",{attrs:{id:"accordion-option",accordion:"my-accordion",role:"tabpanel",visible:""}},[s("b-card-body",{staticClass:"p-2"},[s("b-row",{staticClass:"d-flex flex-wrap"},t._l(e.fields,(function(e,a){return s("b-col",{key:a,attrs:{cols:"12"}},[void 0===e.status||e.status?s("type-displays",{staticClass:"mb-2",attrs:{field:e,currentDevis:t.currentDevis}}):t._e()],1)})),1)],1)],1)],1):t._e()],1)})),1):t._e()],1)],1)},i=[],r=s("f3f3"),n=(s("a9e3"),s("e260"),s("d3b7"),s("e6cf"),s("3ca3"),s("ddb0"),s("caad"),s("2532"),s("b0c0"),s("159b"),s("2f62")),o=s("f158"),l=s("e674"),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"block"},[s("b-button",{staticClass:"mb-2",attrs:{variant:t.statusColor}},[t._v(" "+t._s(t.displayStatus)+" ")]),s("div",{staticClass:"date"},[t._v(t._s(t.getDateDisplay))]),t.infosUser?s("div",{staticClass:"infos-user"},[s(t.infosUser,{tag:"component",staticClass:"infos-user"})],1):t._e(),s("div",{staticClass:"d-flex align-items-center"},[s("h3",{staticClass:"titre"},[t._v(t._s(t.formName))]),s("div",{staticClass:"d-flex"},[s("span",{staticClass:"action mb-2",on:{click:t.getValideStepe}},[t._v(" Voir ")]),t.$store.state.mode?s("span",{staticClass:"action",on:{click:t.formTraiter}},[t._v(" Traiter ")]):t._e()])]),s("b-row",{staticClass:"d-flex liste-fields",attrs:{"align-h":"center"}},t._l(t.itemFields,(function(e,a){return s("b-col",{key:a,attrs:{cols:"4"}},[s(t.getTemplatesFiles(e.type),{tag:"component",staticClass:"content-field",attrs:{field:e,diplayLabel:!0}})],1)})),1)],1)},u=[],d=s("5784"),f={name:"block",props:{item:{type:Object,required:!0},form:{type:Object,required:!0},traitementFormItems:{type:Array,required:!0},dataId:{type:[String,Number]}},computed:{statusColor:function(){var t="";switch(this.item.status){case"1":t="primary";break;case"0":t="danger";break;case"2":t="secondary";break}return t},displayStatus:function(){var t="";switch(this.item.status){case"1":t=o["a"].messages.statusDevis1;break;case"0":t=o["a"].messages.statusDevis0;break;case"2":t=o["a"].messages.statusDevis2;break}return t},getDateDisplay:function(){return o["a"].getMysqlDateToFrench(this.item.created)},formName:function(){return this.form.name},itemFields:function(){var t=[];for(var e in this.item)this.item[e]&&this.item[e].type&&t.push(this.item[e]);return t},infosUser:function(){if(this.item.user&&this.item.user.uid){var t=this.item.user.uid[0].value,e=this.item.user.name[0].value;return{props:{uid:t},render:function(s){return s("a",{props:{uid:t},attrs:{href:"/user/"+t,target:"blank"}},[e])}}}return null}},methods:{getTemplatesFiles:function(t){return d["a"].getTemplatesFiles(t)},getValideStepe:function(){this.$emit("get-valide-stepe",this.dataId),this.$emit("get-info-user",this.item)},formTraiter:function(){this.$emit("form-traiter",this.item)}}},m=f,p=s("2877"),h=Object(p["a"])(m,c,u,!1,null,null,null),v=h.exports,b=s("021a"),_={name:"listBlocks",props:{liste_fields_check:{type:Array,default:function(){return[]}},liste_fields_display:{type:Array,default:function(){return[]}},totalRows:{type:Number,required:!0},isBusy:{type:Boolean,required:!0},perPage:{type:Number,required:!0}},components:{block:v,typeDisplays:function(){return s.e(19).then(s.bind(null,"5b90"))},LoaderIcon:b["a"]},data:function(){return{showModal:!1,validSteps2:[],traitementFormItemsDisplay:[],currentDataId:null,currentDevis:{},currentPage:1}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(n["c"])(["items","CachesUser","form"])),Object(n["b"])(["traitementFormItems"])),{},{trigger_perfom:function(){return this.traitementFormItems.length?(this.getTraitementFormItems(),this.traitementFormItems.length):""},nombreStatus:function(){var t={save:[],rappel:[],loose:[]};if(this.traitementFormItemsDisplay.length)for(var e in this.traitementFormItemsDisplay){var s=this.traitementFormItemsDisplay[e];"1"===s.status?t.save.push(s):"0"===s.status?t.rappel.push(s):"2"===s.status&&t.loose.push(s)}return t}}),methods:{getTraitementFormItems:function(){for(var t in this.traitementFormItemsDisplay=[],this.traitementFormItems){var e=this.traitementFormItems[t],s={id:e.id,status:e.status,created:e.created,price:e.price,uid:e.uid,user:{},idloop:t};for(var a in this.getUser(e.uid,s),e.datas){var i=e.datas[a];for(var r in i.fields){var n=i.fields[r];this.liste_fields_check.includes(n.name)&&(s[n.name]=n)}}this.traitementFormItemsDisplay.push(s)}},formTraiter:function(t){var e="";e="0"==t.status?"1":"0",this.$bvModal.msgBoxConfirm(" Confirmez-vous l'action ? ",{title:" Alerte ",size:"sm",buttonSize:"sm",okVariant:"success",okTitle:"Traiter",cancelTitle:"Annuler",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(s){s&&o["a"].deleteFormTraitement(t.id,e).then((function(){t.status=e}))}))},getUser:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.CachesUser["uid"+t]?s.user=this.CachesUser["uid"+t]:l["e"].getUser(t).then((function(a){s.user=a,e.$store.dispatch("setCachesUser",{uid:t,user:a})}))},getInfoUser:function(t){var e=t.user,s=t.idloop,a=[],i=[{key:"mail",label:"Mail"},{key:"name",label:"Nom"},{key:"field_prenom",label:"Prénom"},{key:"field_telephone",label:"Téléphone"}];return i.forEach((function(t){e[t.key]&&e[t.key][0]&&a.push({text:t.label+" : "+e[t.key][0].value})})),this.traitementFormItems[s]&&this.$set(this.traitementFormItems[s],"user",a),a},updateStatus:function(){if(this.currentDataId){var t={table:"appformmanager_datas",fields:{status:0},action:"update",where:[{column:"id",value:this.currentDataId}]};o["a"].saveForm([t],this.$store.state.mode).then((function(){o["a"].CustomModalSuccess("Vous serrez rappellé par un specialiste dans les plus bref delais.",{title:"Status du devis mise à jour",footerClass:"d-none"}),setTimeout((function(){window.location.reload()}),3e3)}))}},changePagination:function(t){this.$emit("ev-change-pagination",t)},getValideStepe:function(t){var e=this;this.showModal=!this.showModal,this.validSteps2=[],this.currentDataId=this.traitementFormItems[t].id,this.currentDevis=this.traitementFormItems[t],this.validSteps2=this.traitementFormItems[t].datas,console.log("id : ",this.currentDataId),this.traitementFormItems[t]["all-steps-loaded"]||(this.$store.dispatch("loadAllStepOfDevis",{DevisId:this.currentDataId}).then((function(s){s.forEach((function(s){e.traitementFormItems[t].datas.push(s.step)}))})),this.traitementFormItems[t]["all-steps-loaded"]=!0)}}},g=_,y=Object(p["a"])(g,a,i,!1,null,null,null);e["a"]=y.exports},a9e3:function(t,e,s){"use strict";var a=s("83ab"),i=s("da84"),r=s("94ca"),n=s("6eeb"),o=s("1a2d"),l=s("7156"),c=s("d9b5"),u=s("c04e"),d=s("d039"),f=s("241c").f,m=s("06cf").f,p=s("9bf2").f,h=s("408a"),v=s("58a8").trim,b="Number",_=i[b],g=_.prototype,y=function(t){var e=u(t,"number");return"bigint"===typeof e?e:C(e)},C=function(t){var e,s,a,i,r,n,o,l,d=u(t,"number");if(c(d))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof d&&d.length>2)if(d=v(d),e=d.charCodeAt(0),43===e||45===e){if(s=d.charCodeAt(2),88===s||120===s)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+d}for(r=d.slice(2),n=r.length,o=0;o<n;o++)if(l=r.charCodeAt(o),l<48||l>i)return NaN;return parseInt(r,a)}return+d};if(r(b,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var I,k=function(t){var e=arguments.length<1?0:_(y(t)),s=this;return s instanceof k&&d((function(){h(s)}))?l(Object(e),s,k):e},x=a?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),w=0;x.length>w;w++)o(_,I=x[w])&&!o(k,I)&&p(k,I,m(_,I));k.prototype=g,g.constructor=k,n(i,b,k)}}}]);
//# sourceMappingURL=appForm.umd.min.3.js.map