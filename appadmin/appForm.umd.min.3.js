(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[3],{5784:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column justify-content-center text-center"},[t.diplayLabel?a("div",[a("div",{staticClass:"icon"},[a("b-icon",{attrs:{icon:"shield","font-scale":"1.7"}})],1)]):t._e(),t.diplayLabel?a("div",{staticClass:"label-field"},[t._v("Ville")]):t._e(),a("div",{staticClass:"field-content"},[t._v(t._s(t.value))])])},i=[],r={name:"codePostal",props:{field:{type:Object,required:!0},diplayLabel:{type:Boolean}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{value:function(){return this.field.value&&this.field.value.text?this.field.value.text:""}},methods:{}},n=r,l=a("2877"),o=Object(l["a"])(n,s,i,!1,null,"11b3d658",null),c=o.exports,u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column justify-content-center text-center",attrs:{"data-render":"default-render"}},[t.diplayLabel?a("div",[a("div",{staticClass:"icon"},[a("b-icon",{attrs:{icon:"cloud-download","font-scale":"1.7"}})],1)]):t._e(),t.diplayLabel?a("div",{staticClass:"label-field"},[t._v(" "+t._s(t.field.label)+" ")]):t._e(),a("div",{staticClass:"field-content"},[t._v(t._s(t.field.value))])])},d=[],f={name:"defaultRender.vue",props:{field:{type:Object,required:!0},diplayLabel:{type:Boolean,default:!1}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{},methods:{}},m=f,p=Object(l["a"])(m,u,d,!1,null,"27a98904",null),v=p.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column justify-content-center text-center",attrs:{"data-render":"select"}},[t.diplayLabel?a("div",[a("div",{staticClass:"icon"},[a("b-icon",{attrs:{icon:"box","font-scale":"1.7"}})],1)]):t._e(),t.diplayLabel?a("div",{staticClass:"label-field"},[t._v(" "+t._s(t.field.label)+" ")]):t._e(),a("ul",{staticClass:"m-0 p-0 pl-4 field-content"},t._l(t.getValue,(function(e,s){return a("li",{key:s},[t._v(" "+t._s(e)+" ")])})),0)])},b=[],_=a("0122"),y={name:"select",props:{field:{type:Object,required:!0},diplayLabel:{type:Boolean,default:!1}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{getValue:function(){var t=[];if(this.field.value){var e=Object(_["a"])(this.field.value);if("object"===e)for(var a in this.field.value)t.push(this.getTextInOptions(this.field.value[a]));else t.push(this.getTextInOptions(this.field.value))}return t}},methods:{getTextInOptions:function(t){for(var e in this.field.options)if(this.field.options[e].value===t)return this.field.options[e].text}}},g=y,C=Object(l["a"])(g,h,b,!1,null,"51b877b5",null),I=C.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex justify-content-center text-center",attrs:{"data-render":"recapitulatif"}},[t.diplayLabel?a("div",{staticClass:"label-field"},[t._v(t._s(t.field.label))]):t._e(),t.field.complex_logique?t._e():a("strong",{staticClass:"field-content"},[t._v(" "+t._s(t.priceEstimation)+" € ")]),t.field.complex_logique?t._e():a("div",{domProps:{innerHTML:t._s(t.field.montant)}})])},k=[],D={name:"recapitulatif",props:{field:{type:Object,required:!0},diplayLabel:{type:Boolean,default:!1}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{priceEstimation:function(){var t=this.field.prix.cout;if(t>0&&this.field.percent){var e=parseInt(this.field.percent);if(e>0)return e=t*e/100+t,t+" - "+e}return t}},methods:{}},w=D,j=Object(l["a"])(w,x,k,!1,null,"5ea12809",null),F=j.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"m-0 p-0 pl-4"},t._l(t.currentDevisDisplay,(function(e,s){return a("li",{key:s,staticClass:"d-flex"},[a("strong",{staticClass:"value"},[t._v(" "+t._s(e)+" ")])])})),0)])},E=[],T={name:"userlogin",props:{field:{type:Object,required:!0},currentDevis:{type:Object}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{currentDevisDisplay:function(){if(this.currentDevis&&this.currentDevis.user){var t=[];for(var e in this.currentDevis.user){var a=this.currentDevis.user[e];"name"==e&&t.push("Nom d'utilisateur : "+a[0].value),"mail"==e&&t.push("e-mail : "+a[0].value),"field_prenom"==e&&a[0]&&t.push("Nom & prenom : "+a[0].value),"field_telephone"==e&&a[0]&&t.push("Telephone : "+a[0].value)}return t}return[]}},methods:{}},S=T,N=Object(l["a"])(S,O,E,!1,null,"3681c70a",null),$=N.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ul",{staticClass:"m-0 p-0 pl-4"},t._l(t.value,(function(e,s){return a("li",{key:s},[a("a",{attrs:{href:e.url,download:e.filename}},[t._v(t._s(e.filename))])])})),0)])},A=[],M={name:"file",props:{field:{type:Object,required:!0}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{value:function(){return this.field.value.length?this.field.value:[]}},methods:{}},P=M,q=Object(l["a"])(P,L,A,!1,null,"a02ae002",null),V=q.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"d-flex flex-column justify-content-center text-center",attrs:{"data-render":"default-render"}},[t.diplayLabel?a("div",[a("div",{staticClass:"icon"},[a("b-icon",{attrs:{icon:"cloud-download","font-scale":"1.7"}})],1)]):t._e(),t.diplayLabel?a("div",{staticClass:"label-field"},[t._v(" "+t._s(t.field.label)+" ")]):t._e(),a("div",{staticClass:"field-content"},[t._v(t._s(t.field.value)+" €")])])},U=[],R={name:"defaultRender.vue",props:{field:{type:Object,required:!0},diplayLabel:{type:Boolean,default:!1}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:{},methods:{}},z=R,H=Object(l["a"])(z,B,U,!1,null,"dd1f1a7a",null),G=H.exports;e["a"]={getTemplatesFiles:function(t){var e=v;switch(t){case"codepostal":e=c;break;case"select":e=I;break;case"checkbox":e=I;break;case"radio":e=I;break;case"recapitulatif":e=F;break;case"userlogin":e=$;break;case"file":e=V;break;case"input-aide-financiere":e=G;break}return e}}},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var s=a("1d80"),i=a("577e"),r=a("5899"),n="["+r+"]",l=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),c=function(t){return function(e){var a=i(s(e));return 1&t&&(a=a.replace(l,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},"63c9":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("b-row",{attrs:{"align-h":"center"}},[s("b-col",{attrs:{lg:t.conf.col?"12":"10",cols:"12"}},[s("div",{staticClass:"block-title pr-2"},[s("div",{staticClass:"backButton",attrs:{to:"/"},on:{click:t.returnHome}},[s("img",{attrs:{src:a("6416"),alt:"",width:"55px",height:"30px"}})]),s("h5",{staticClass:"m-0"},[t._v(" "+t._s(t.conf.text)+" "),t.form.name?s("span",{staticClass:"form-title"},[t._v(" : "+t._s(t.form.name))]):t._e()]),s("div",[s("h5",{directives:[{name:"show",rawName:"v-show",value:t.showDevis,expression:"showDevis"}],staticClass:"m-0",class:t.uid?"title-right":"",on:{click:t.seeDevis}},[t.uid?s("span",[t._v(" Voir mes devis")]):t._e()])])])])],1)},i=[],r=a("f3f3"),n=a("2f62"),l={props:{showDevis:{type:Boolean,default:!0},conf:{type:Object,default:function(){return{col:!1,text:"Estimation de devis"}}}},data:function(){return{value:1}},computed:Object(r["a"])(Object(r["a"])({},Object(n["c"])(["stepsIndex","form"])),Object(n["b"])(["uid"])),methods:{returnHome:function(){this.$router.push({path:"/"})},seeDevis:function(){this.$router.push({path:"/traitement-my-own/".concat(this.id)})}}},o=l,c=a("2877"),u=Object(c["a"])(o,s,i,!1,null,null,null);e["a"]=u.exports},6416:function(t,e,a){t.exports=a.p+"img/long-arrow-alt-left-solid.d9d4427b.svg"},7156:function(t,e,a){var s=a("1626"),i=a("861d"),r=a("d2bb");t.exports=function(t,e,a){var n,l;return r&&s(n=e.constructor)&&n!==a&&i(l=n.prototype)&&l!==a.prototype&&r(t,l),t}},"8bba":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("loader-icon",{attrs:{busy:t.isBusy}}),t.isBusy?t._e():a("div",{staticClass:"titre-project-resume"},[a("b-col",{staticClass:"notif",attrs:{cols:"12",md:"5",lg:"3"}},[a("span",{staticClass:"notif-alert notif-at"},[t._v(" "+t._s(t.nombreStatus.rappel.length)+" ")]),a("span",[t._v(" Projet en attente de rappel ")])]),a("b-col",{staticClass:"notif",attrs:{cols:"12",md:"5",lg:"3"}},[a("span",{staticClass:"notif-alert notif-sa"},[t._v(t._s(t.nombreStatus.save.length))]),a("span",[t._v(" Projet sauvegardé ")])]),t.$store.state.mode?a("b-col",{staticClass:"notif",attrs:{cols:"12",md:"5",lg:"3"}},[a("span",{staticClass:"notif-ab notif-alert"},[t._v(" "+t._s(t.nombreStatus.loose.length)+" ")]),a("span",[t._v(" Projet abandonné ")])]):t._e()],1),t.isBusy?t._e():a("b-row",{staticClass:"list-block",attrs:{trigger_perfom:t.trigger_perfom}},t._l(t.traitementFormItemsDisplay,(function(e,s){return a("b-col",{key:s,attrs:{md:"12"}},[a("block",{attrs:{item:e,form:t.form,traitementFormItems:t.traitementFormItemsDisplay,"data-id":s},on:{"get-valide-stepe":t.getValideStepe,"form-traiter":t.formTraiter,"get-info-user":t.getInfoUser}})],1)})),1),t.totalRows>t.perPage?a("b-pagination",{staticClass:"pt-5 pb-5 mt-5 mb-0",attrs:{"total-rows":t.totalRows,"per-page":t.perPage,align:"fill",size:"sm"},on:{change:t.changePagination},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}):t._e(),a("b-modal",{ref:"modal",staticClass:"super-hover",attrs:{id:"modal--closing",size:"lg",title:"Résultat du formulaire",scrollable:"",cancelTitle:"Quitter",okTitle:"Me rappeler"},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[a("div",{staticClass:"d-flex"},[a("div",{staticClass:"w-100"},[a("b-button",{staticClass:"mr-3",attrs:{variant:"primary",size:"sm"},on:{click:function(e){return t.$bvModal.hide("modal--closing")}}},[t._v(" Quitter ")]),"1"!==t.currentDevis.status&&1!==t.currentDevis.status||!t.currentDevis.uid.includes(t.$store.getters.uid)?t._e():a("b-button",{attrs:{variant:"primary",size:"sm"},on:{click:function(e){return t.updateStatus()}}},[t._v(" Me rappeler ")])],1)])]},proxy:!0}]),model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t.traitementFormItemsDisplay.length?a("b-row",{attrs:{"align-h":"center"}},t._l(t.validSteps2,(function(e,s){return a("b-col",{key:s,staticClass:"mb-4",attrs:{sm:"12"}},[void 0!==e?a("b-card",{staticClass:"mb-1",attrs:{"no-body":""}},[a("b-card-header",{staticClass:"p-1",attrs:{"header-tag":"header",role:"tab"}},[a("b-button",{attrs:{block:"",variant:"dark",disabled:""}},[t._v(" "+t._s(e.info.title)+" ")])],1),a("b-collapse",{attrs:{id:"accordion-option",accordion:"my-accordion",role:"tabpanel",visible:""}},[a("b-card-body",{staticClass:"p-2"},[a("b-row",{staticClass:"d-flex flex-wrap"},t._l(e.fields,(function(e,s){return a("b-col",{key:s,attrs:{cols:"12"}},[a("type-displays",{staticClass:"mb-2",attrs:{field:e,currentDevis:t.currentDevis}})],1)})),1)],1)],1)],1):t._e()],1)})),1):t._e()],1)],1)},i=[],r=a("f3f3"),n=(a("a9e3"),a("e260"),a("d3b7"),a("e6cf"),a("3ca3"),a("ddb0"),a("caad"),a("2532"),a("b0c0"),a("159b"),a("2f62")),l=a("f158"),o=a("e674"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"block"},[a("b-button",{staticClass:"mb-2",attrs:{variant:t.statusColor}},[t._v(" "+t._s(t.displayStatus)+" ")]),a("div",{staticClass:"date"},[t._v(t._s(t.getDateDisplay))]),t.infosUser?a("div",{staticClass:"infos-user"},[a(t.infosUser,{tag:"component",staticClass:"infos-user"})],1):t._e(),a("div",{staticClass:"d-flex align-items-center"},[a("h3",{staticClass:"titre"},[t._v(t._s(t.formName))]),a("div",{staticClass:"d-flex"},[a("span",{staticClass:"action mb-2",on:{click:t.getValideStepe}},[t._v(" Voir ")]),t.$store.state.mode?a("span",{staticClass:"action",on:{click:t.formTraiter}},[t._v(" Traiter ")]):t._e()])])],1)},u=[],d=a("5784"),f={name:"block",props:{item:{type:Object,required:!0},form:{type:Object,required:!0},traitementFormItems:{type:Array,required:!0},dataId:{type:[String,Number]}},computed:{statusColor:function(){var t="";switch(this.item.status){case"1":t="primary";break;case"0":t="danger";break;case"2":t="secondary";break}return t},displayStatus:function(){var t="";switch(this.item.status){case"1":t=l["a"].messages.statusDevis1;break;case"0":t=l["a"].messages.statusDevis0;break;case"2":t=l["a"].messages.statusDevis2;break}return t},getDateDisplay:function(){return l["a"].getMysqlDateToFrench(this.item.created)},formName:function(){return this.form.name},itemFields:function(){var t=[];for(var e in this.item)this.item[e]&&this.item[e].type&&t.push(this.item[e]);return t},infosUser:function(){if(this.item.user&&this.item.user.uid){var t=this.item.user.uid[0].value,e=this.item.user.name[0].value;return{props:{uid:t},render:function(a){return a("a",{props:{uid:t},attrs:{href:"/user/"+t,target:"blank"}},[e])}}}return null}},methods:{getTemplatesFiles:function(t){return d["a"].getTemplatesFiles(t)},getValideStepe:function(){this.$emit("get-valide-stepe",this.dataId)},formTraiter:function(){this.$emit("form-traiter",this.item)}}},m=f,p=a("2877"),v=Object(p["a"])(m,c,u,!1,null,null,null),h=v.exports,b=a("021a"),_={name:"listBlocks",props:{liste_fields_check:{type:Array,default:function(){return[]}},liste_fields_display:{type:Array,default:function(){return[]}},totalRows:{type:Number,required:!0},isBusy:{type:Boolean,required:!0},perPage:{type:Number,required:!0}},components:{block:h,typeDisplays:function(){return a.e(21).then(a.bind(null,"5b90"))},LoaderIcon:b["a"]},data:function(){return{showModal:!1,validSteps2:[],traitementFormItemsDisplay:[],currentDataId:null,currentDevis:{},currentPage:1}},computed:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(n["c"])(["items","CachesUser","form"])),Object(n["b"])(["traitementFormItems"])),{},{trigger_perfom:function(){return this.traitementFormItems.length?(this.getTraitementFormItems(),this.traitementFormItems.length):""},nombreStatus:function(){var t={save:[],rappel:[],loose:[]};if(this.traitementFormItemsDisplay.length)for(var e in this.traitementFormItemsDisplay){var a=this.traitementFormItemsDisplay[e];"1"===a.status?t.save.push(a):"0"===a.status?t.rappel.push(a):"2"===a.status&&t.loose.push(a)}return t}}),methods:{getTraitementFormItems:function(){for(var t in this.traitementFormItemsDisplay=[],this.traitementFormItems){var e=this.traitementFormItems[t],a={id:e.id,status:e.status,created:e.created,price:e.price,uid:e.uid,datas:e.datas,user:{},idloop:t};for(var s in this.getUser(e.uid,a),e.datas){var i=e.datas[s];for(var r in i.fields){var n=i.fields[r];this.liste_fields_check.includes(n.name)&&(a[n.name]=n)}}this.traitementFormItemsDisplay.push(a)}console.log("traitementFormItemsDisplay : ",this.traitementFormItemsDisplay)},formTraiter:function(t){var e="";e="0"==t.status?"1":"0",this.$bvModal.msgBoxConfirm(" Confirmez-vous l'action ? ",{title:" Alerte ",size:"sm",buttonSize:"sm",okVariant:"success",okTitle:"Traiter",cancelTitle:"Annuler",footerClass:"p-2",hideHeaderClose:!1,centered:!0}).then((function(a){a&&l["a"].deleteFormTraitement(t.id,e).then((function(){t.status=e}))}))},getUser:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"0"==t||0==t?a.user={}:this.CachesUser["uid"+t]?a.user=this.CachesUser["uid"+t]:o["e"].getUser(t).then((function(s){a.user=s,e.$store.dispatch("setCachesUser",{uid:t,user:s})}))},getInfoUser:function(t){var e=t.user,a=t.idloop,s=[],i=[{key:"mail",label:"Mail"},{key:"name",label:"Nom"},{key:"field_prenom",label:"Prénom"},{key:"field_telephone",label:"Téléphone"}];return i.forEach((function(t){e[t.key]&&e[t.key][0]&&s.push({text:t.label+" : "+e[t.key][0].value})})),this.traitementFormItems[a]&&this.$set(this.traitementFormItems[a],"user",s),s},updateStatus:function(){if(this.currentDataId){var t={table:"appformmanager_datas",fields:{status:0},action:"update",where:[{column:"id",value:this.currentDataId}]};l["a"].saveForm([t],this.$store.state.mode).then((function(){l["a"].CustomModalSuccess("Vous serrez rappellé par un specialiste dans les plus bref delais.",{title:"Status du devis mise à jour",footerClass:"d-none"}),setTimeout((function(){window.location.reload()}),3e3)}))}},changePagination:function(t){this.$emit("ev-change-pagination",t)},getValideStepe:function(t){var e=this;this.showModal=!this.showModal,this.validSteps2=[],this.currentDataId=this.traitementFormItemsDisplay[t].id,this.currentDevis=this.traitementFormItemsDisplay[t],this.validSteps2=this.traitementFormItemsDisplay[t].datas,this.traitementFormItemsDisplay[t]["all-steps-loaded"]||(this.loadAllStepOfDevis({DevisId:this.currentDataId}).then((function(a){a.forEach((function(a){e.traitementFormItemsDisplay[t].datas.push(a.step)}))})),this.traitementFormItemsDisplay[t]["all-steps-loaded"]=!0)},loadAllStepOfDevis:function(t){return new Promise((function(e,a){var s="/appformmanager/getdevis-steps/0";l["a"].getData(t,!1,s).then((function(t){console.log("DEvis : ",t),e(t.data)})).catch((function(t){a(t)}))}))}}},y=_,g=Object(p["a"])(y,s,i,!1,null,null,null);e["a"]=g.exports},a9e3:function(t,e,a){"use strict";var s=a("83ab"),i=a("da84"),r=a("94ca"),n=a("6eeb"),l=a("1a2d"),o=a("7156"),c=a("d9b5"),u=a("c04e"),d=a("d039"),f=a("241c").f,m=a("06cf").f,p=a("9bf2").f,v=a("408a"),h=a("58a8").trim,b="Number",_=i[b],y=_.prototype,g=function(t){var e=u(t,"number");return"bigint"===typeof e?e:C(e)},C=function(t){var e,a,s,i,r,n,l,o,d=u(t,"number");if(c(d))throw TypeError("Cannot convert a Symbol value to a number");if("string"==typeof d&&d.length>2)if(d=h(d),e=d.charCodeAt(0),43===e||45===e){if(a=d.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:s=2,i=49;break;case 79:case 111:s=8,i=55;break;default:return+d}for(r=d.slice(2),n=r.length,l=0;l<n;l++)if(o=r.charCodeAt(l),o<48||o>i)return NaN;return parseInt(r,s)}return+d};if(r(b,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var I,x=function(t){var e=arguments.length<1?0:_(g(t)),a=this;return a instanceof x&&d((function(){v(a)}))?o(Object(e),a,x):e},k=s?f(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),D=0;k.length>D;D++)l(_,I=k[D])&&!l(x,I)&&p(x,I,m(_,I));x.prototype=y,y.constructor=x,n(i,b,x)}}}]);
//# sourceMappingURL=appForm.umd.min.3.js.map