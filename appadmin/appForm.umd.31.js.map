{"version":3,"sources":["webpack://appForm/./src/App/traitement/TraitementMyOwn.vue?de52","webpack://appForm/src/App/traitement/TraitementMyOwn.vue","webpack://appForm/./src/App/traitement/TraitementMyOwn.vue?81fd","webpack://appForm/./src/App/traitement/TraitementMyOwn.vue","webpack://appForm/./src/App/traitement/TraitementMyOwn.vue?1bc9","webpack://appForm/./src/App/traitement/TraitementMyOwn.vue?232a"],"names":[],"mappings":"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","file":"appForm.umd.31.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-container',{attrs:{\"fluid\":\"md\"}},[_c('div',[_c('title-bar',{attrs:{\"conf\":{ col: true, text: 'Mes Devis : ' + _vm.titreDevis },\"id\":_vm.id,\"showDevis\":false}})],1),_c('div',{staticClass:\"appfom-container\"},[_c('b-row',{attrs:{\"align-h\":\"center\"}},[_c('b-col',{attrs:{\"cols\":\"12\"}},[_c('listBlocks',{attrs:{\"liste_fields_check\":_vm.ListeFieldsCheck,\"liste_fields_display\":_vm.ListeFieldsDisplay,\"totalRows\":_vm.totalRows,\"isBusy\":_vm.isBusy,\"perPage\":_vm.perPage},on:{\"ev-change-pagination\":_vm.ChangePagination}})],1)],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-container fluid=\"md\">\n    <div>\n      <title-bar\n        :conf=\"{ col: true, text: 'Mes Devis : ' + titreDevis }\"\n        :id=\"id\"\n        :showDevis=\"false\"\n      ></title-bar>\n    </div>\n    <div class=\"appfom-container\">\n      <b-row align-h=\"center\">\n        <b-col class=\"\" cols=\"12\">\n          <listBlocks\n            :liste_fields_check=\"ListeFieldsCheck\"\n            :liste_fields_display=\"ListeFieldsDisplay\"\n            :totalRows=\"totalRows\"\n            :isBusy=\"isBusy\"\n            :perPage=\"perPage\"\n            @ev-change-pagination=\"ChangePagination\"\n          ></listBlocks>\n        </b-col>\n      </b-row>\n    </div>\n  </b-container>\n</template>\n\n<script>\nimport TitleBar from \"../components/TitleBar.vue\";\nimport config from \"../config/config.js\";\nimport { mapState, mapGetters } from \"vuex\";\nimport listBlocks from \"./blocks/listBlocks.vue\";\n\nexport default {\n  components: { listBlocks, TitleBar },\n  props: {\n    id: {\n      type: String,\n      required: true,\n    },\n  },\n  data: () => {\n    return {\n      totalRows: 0,\n      isBusy: false,\n      perPage: 8,\n    };\n  },\n  watch: {\n    stepsId() {\n      this.datasBdOrLocalStorage();\n    },\n  },\n  mounted() {\n    this.loadDatas();\n    this.getTotalRows();\n  },\n  computed: {\n    ...mapState([\"traitementId\", \"form\", \"traitementItems\"]),\n    ...mapGetters([\"traitementFormItems\"]),\n    ListeFieldsDisplay() {\n      const fieldsDisplay = [\n        {\n          label: \"Date\",\n          key: \"created\",\n          formatter: function (val) {\n            return config.getMysqlDateToFrench(val);\n          },\n        },\n        {\n          label: \"Que souhaitez vous faire\",\n          key: \"action\",\n          stickyColumn: true,\n          thStyle: { minWidth: \"170px\" },\n          tdClass: [\"bg-light\"],\n        },\n        {\n          label: \"Status\",\n          key: \"status\",\n          thStyle: { minWidth: \"140px\" },\n        },\n        {\n          label: \"Prix\",\n          key: \"price\",\n          thStyle: { minWidth: \"120px\" },\n          formatter: (value) => {\n            return value + \" â‚¬\";\n          },\n        },\n        {\n          label: \"Utilisateur\",\n          key: \"uid\",\n          thStyle: { minWidth: \"220px\" },\n        },\n      ];\n      for (const i in this.form.forms) {\n        const form = this.form.forms[i];\n        for (const f in form.fields) {\n          const field = form.fields[f];\n          if (field.display_field) {\n            fieldsDisplay.push({\n              label: field.label,\n              key: field.name,\n              thStyle: { minWidth: \"220px\" },\n            });\n          }\n        }\n      }\n      return fieldsDisplay;\n    },\n    ListeFieldsCheck() {\n      const lists = [];\n      for (const i in this.ListeFieldsDisplay) {\n        lists.push(this.ListeFieldsDisplay[i].key);\n      }\n      return lists;\n    },\n    titreDevis() {\n      if (this.traitementItems.length) {\n        return this.traitementItems[0].name;\n      } else return \"\";\n    },\n  },\n  methods: {\n    deleteSteps() {\n      var all = this.$store.state.allStepsDatas;\n      var r = all.indexOf(this.formDatas);\n      this.$emit(\"index-to-delete\", r);\n      for (var i = all.length - 1; i >= 0; i--) {\n        if (i === r) {\n          all.splice(i, 1);\n        }\n      }\n    },\n\n    saveToLocal() {\n      config.prepareDatasToSave(this.form).then((val) => {\n        config.saveForm(val).then(() => {\n          //\n        });\n      });\n    },\n    resetValue() {\n      this.$store.getters.formDatas.selected = \"\";\n      this.$store.getters.formDatas.value = [];\n    },\n    handleOk(bvModalEvt) {\n      bvModalEvt.preventDefault();\n      this.handleSubmit();\n    },\n    handleSubmit(event) {\n      event.preventDefault();\n      this.$nextTick(() => {\n        this.$bvModal.hide(\"modal-prevent-closing\");\n      });\n    },\n    getTotalRows() {\n      var payload = {\n        beginSql: \" select count(*) as nombres from `appformmanager_datas` \",\n        filters: {\n          AND: [],\n          OR: [],\n        },\n      };\n      payload.filters.AND.push({\n        column: \"appformmanager_forms\",\n        value: this.id,\n      });\n      config\n        .bPost(\"/appformmanager/count-devis-own\", payload, {}, false)\n        .then((resp) => {\n          if (resp.data[0] && resp.data[0].nombres) {\n            this.totalRows = parseInt(resp.data[0].nombres);\n          }\n        });\n    },\n    loadDatas(pagination = 0) {\n      this.isBusy = true;\n      var payload = {\n        filters: {\n          AND: [],\n          OR: [],\n        },\n      };\n      payload.filters.AND.push({\n        column: \"appformmanager_forms\",\n        value: this.id,\n        preffix: \"dv\",\n      });\n      payload.filters.AND.push({\n        column: \"order\",\n        value: 0,\n        preffix: \"st\",\n      });\n      config\n        .bPost(\n          \"/appformmanager/getdevis-own/\" + pagination + \"/\" + this.perPage,\n          payload,\n          {},\n          false\n        )\n        .then((resp) => {\n          this.$store.state.traitementItems = resp.data;\n          this.$store.dispatch(\"setTraitId\", this.id);\n          this.$store.dispatch(\"setFormId\", this.id);\n          this.isBusy = false;\n        })\n        .catch(() => {\n          this.isBusy = false;\n        });\n    },\n    ChangePagination(val) {\n      this.loadDatas(val - 1);\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.form-title {\n  letter-spacing: 2px;\n  margin-left: 10px;\n  font-weight: 600;\n}\n.block-button {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: space-evenly;\n  button {\n    margin: 5px;\n  }\n}\n@import \"./affichage/traitement.scss\";\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TraitementMyOwn.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TraitementMyOwn.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TraitementMyOwn.vue?vue&type=template&id=74a40e92&\"\nimport script from \"./TraitementMyOwn.vue?vue&type=script&lang=js&\"\nexport * from \"./TraitementMyOwn.vue?vue&type=script&lang=js&\"\nimport style0 from \"./TraitementMyOwn.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","// extracted by mini-css-extract-plugin","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TraitementMyOwn.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}