{"version":3,"sources":["webpack://appForm/./src/App/components/TitleBar.vue?5f2f","webpack://appForm/src/App/components/TitleBar.vue","webpack://appForm/./src/App/components/TitleBar.vue?4586","webpack://appForm/./src/App/components/TitleBar.vue","webpack://appForm/./public/long-arrow-alt-left-solid.svg","webpack://appForm/./src/App/GestionFields.vue?525e","webpack://appForm/./src/App/gestions-chemps/store.js","webpack://appForm/src/App/GestionFields.vue","webpack://appForm/./src/App/GestionFields.vue?cf4b","webpack://appForm/./src/App/GestionFields.vue"],"names":["state","fields","filtre","formid","loaders","GestionField","GestionFieldFiltre","mutations","SET_FIELDS","forEach","item","push","JSON","parse","jsonfield","id","SET_FILTRE","key","value","actions","GetFields","commit","dispatch","datas","config","getData","then","r","console","log","data","GetFieldsDefault","length","defaultjson","SetFiltre"],"mappings":"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","file":"appForm.common.33.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('b-row',{attrs:{\"align-h\":\"center\"}},[_c('b-col',{attrs:{\"lg\":_vm.conf.col ? '12' : '10',\"cols\":\"12\"}},[_c('div',{staticClass:\"block-title pr-2\"},[_c('div',{staticClass:\"backButton\",attrs:{\"to\":\"/\"},on:{\"click\":_vm.returnHome}},[_c('img',{attrs:{\"src\":require(\"../../../public/long-arrow-alt-left-solid.svg\"),\"alt\":\"\",\"width\":\"55px\",\"height\":\"30px\"}})]),_c('h5',{staticClass:\"m-0\"},[_vm._v(\" \"+_vm._s(_vm.conf.text)+\" \"),(_vm.form.name)?_c('span',{staticClass:\"form-title\"},[_vm._v(\" : \"+_vm._s(_vm.form.name))]):_vm._e()]),_c('div',[_c('h5',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showDevis),expression:\"showDevis\"}],staticClass:\"m-0\",class:_vm.uid ? 'title-right' : '',on:{\"click\":_vm.seeDevis}},[(_vm.uid)?_c('span',[_vm._v(\" Voir mes devis\")]):_vm._e()])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <b-row align-h=\"center\" class=\"\">\n    <b-col :lg=\"conf.col ? '12' : '10'\" cols=\"12\">\n      <div class=\"block-title pr-2\">\n        <div class=\"backButton\" @click=\"returnHome\" to=\"/\">\n          <img\n            src=\"../../../public/long-arrow-alt-left-solid.svg\"\n            alt=\"\"\n            width=\"55px\"\n            height=\"30px\"\n          />\n        </div>\n        <h5 class=\"m-0\">\n          {{ conf.text }}\n          <span class=\"form-title\" v-if=\"form.name\"> : {{ form.name }}</span>\n        </h5>\n        <div>\n          <h5\n            class=\"m-0\"\n            v-show=\"showDevis\"\n            :class=\"uid ? 'title-right' : ''\"\n            @click=\"seeDevis\"\n          >\n            <span v-if=\"uid\"> Voir mes devis</span>\n          </h5>\n        </div>\n      </div>\n    </b-col>\n  </b-row>\n</template>\n\n<script>\nimport { mapGetters, mapState } from \"vuex\";\n\nexport default {\n  props: {\n    showDevis: { type: Boolean, default: true },\n    conf: {\n      type: Object,\n      default: function () {\n        return {\n          col: false,\n          text: \"Estimation de devis\",\n        };\n      },\n    },\n  },\n  data() {\n    return {\n      value: 1,\n    };\n  },\n  computed: {\n    ...mapState([\"stepsIndex\", \"form\"]),\n    ...mapGetters([\"uid\"]),\n  },\n  methods: {\n    returnHome() {\n      this.$router.push({ path: `/` });\n    },\n    seeDevis() {\n      this.$router.push({ path: `/traitement-my-own/${this.id}` });\n    },\n  },\n};\n</script>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TitleBar.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./TitleBar.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./TitleBar.vue?vue&type=template&id=0bb93234&\"\nimport script from \"./TitleBar.vue?vue&type=script&lang=js&\"\nexport * from \"./TitleBar.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/long-arrow-alt-left-solid.d9d4427b.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('title-bar',{attrs:{\"conf\":{ col: true, text: 'Gestion des champs' }}}),_c('Filtre',{attrs:{\"listForms\":_vm.listForms}}),_c('tableauChamps',{attrs:{\"listForms\":_vm.listForms}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// mini store, utilisable uniquement dans l'espace de gestion des champs.\nimport config from \"../config/config.js\";\nexport default {\n  state: () => ({\n    /**\n     * Contient la liste des champs utilisés par le gestionnaire de champs.\n     */\n    fields: [],\n    /**\n     * Permet de filtrer les champs reçu.\n     */\n    filtre: {\n      formid: \"\",\n    },\n    /**\n     * - permet d'afficher un loader, si necessaire.\n     */\n    loaders: {\n      GestionField: false,\n      GestionFieldFiltre: false,\n    },\n  }),\n  mutations: {\n    SET_FIELDS(state, fields) {\n      fields.forEach((item) => {\n        state.fields.push({ ...JSON.parse(item.jsonfield), id: item.id });\n      });\n    },\n    SET_FILTRE(state, filtre) {\n      state.filtre[filtre.key] = filtre.value;\n    },\n  },\n  actions: {\n    /**\n     * Recupere les champs\n     * @param {*} param0\n     */\n    GetFields({ commit, state, dispatch }) {\n      state.loaders.GestionField = true;\n      state.loaders.GestionFieldFiltre = true;\n      state.fields = [];\n      var datas = \" select * from `appformmanager_fields` as f \";\n      if (state.filtre.formid) {\n        datas +=\n          \" where f.formid='\" + state.filtre.formid + \"' order by f.id DESC \";\n        return config.getData(datas).then((r) => {\n          console.log(\"GetFields : \", r);\n          commit(\"SET_FIELDS\", r.data);\n          state.loaders.GestionField = false;\n          dispatch(\"GetFieldsDefault\");\n        });\n      }\n    },\n    GetFieldsDefault({ state }) {\n      var datas =\n        \" select f.defaultjson from `appformmanager_steps_fields` as f \";\n\n      if (state.filtre.formid !== \"\") {\n        datas +=\n          \" where f.defaultjson is not null and f.formid=\" +\n          state.filtre.formid +\n          \"  order by f.stepid ASC  \";\n        return config.getData(datas).then((r) => {\n          r.data.forEach((item) => {\n            //test\n            if (state.fields.length < 50)\n              state.fields.push({\n                ...JSON.parse(item.defaultjson),\n                formid: state.filtre.formid,\n              });\n          });\n\n          state.loaders.GestionFieldFiltre = false;\n        });\n      }\n    },\n    SetFiltre({ commit }, filtre) {\n      commit(\"SET_FILTRE\", filtre);\n    },\n  },\n};\n","<template>\n  <div>\n    <title-bar :conf=\"{ col: true, text: 'Gestion des champs' }\"></title-bar>\n    <Filtre :listForms=\"listForms\"></Filtre>\n    <tableauChamps :listForms=\"listForms\"></tableauChamps>\n  </div>\n</template>\n\n<script>\nimport TitleBar from \"./components/TitleBar.vue\";\n//import Filtre from \"./gestions-chemps/filtres.vue\";\n//import tableauChamps from \"./gestions-chemps/tableauChamps.vue\";\nimport MiniStore from \"./gestions-chemps/store.js\";\nexport default {\n  name: \"GestionFields\",\n  components: {\n    TitleBar,\n    // on doit charge le sous module vuex avant l'execution de ce dernier.\n    Filtre: () => {\n      return new Promise((resolv) => {\n        resolv(import(\"./gestions-chemps/filtres.vue\"));\n      });\n    },\n    // on doit charge le sous module vuex avant l'execution de ce dernier.\n    tableauChamps: () => {\n      return new Promise((resolv) => {\n        resolv(import(\"./gestions-chemps/tableauChamps.vue\"));\n      });\n    },\n  },\n  data() {\n    return {\n      listForms: [],\n    };\n  },\n  mounted() {\n    console.log(\"chargement de gestion des champs.\");\n    this.$store.registerModule(\"StoreGestionChamps\", MiniStore);\n    this.$store.dispatch(\"loadFormsDatas\").then(() => {\n      this.$store.state.items.forEach((item) => {\n        this.listForms.push({ value: item.id, text: item.name });\n      });\n    });\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GestionFields.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GestionFields.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GestionFields.vue?vue&type=template&id=11371a1f&\"\nimport script from \"./GestionFields.vue?vue&type=script&lang=js&\"\nexport * from \"./GestionFields.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}