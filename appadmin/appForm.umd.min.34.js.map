{"version":3,"sources":["webpack://appForm/./src/App/EditsFields/vee-validate-custom.js","webpack://appForm/./src/App/config/validation.js","webpack://appForm/./src/App/input/Autocomplete.vue?46a0","webpack://appForm/src/App/input/Autocomplete.vue","webpack://appForm/./src/App/input/Autocomplete.vue?a51c","webpack://appForm/./src/App/input/Autocomplete.vue"],"names":["extend","email","required","message","alpha","numeric","validationRessource","conditions","action","name","operator","value","state_name","listsOperators","text","Action","val","computedValidation","formDatas","currentField","formDatasValidate","i","fields","field","j","states","state","undefined","valid","config","typeSelection","includes","type","x","String","y","localeCompare","parseInt","listesEtapes","form","etapes","forms","length","currentForm","info","push","title","getFormStateByName","getFieldByName","ValidationInstance","this","StepeValidationOptions","condition","options","label","render","_vm","_h","$createElement","_c","_self","class","validationField","mode","attrs","staticClass","require","scopedSlots","_u","key","fn","v","nameWithLang","isLoading","on","asyncFind","model","callback","$$v","$set","expression","slot","_v","_l","error","ii","_s","_e","staticRenderFns","props","Object","components","Multiselect","ValidationProvider","data","computed","status","setStatus","methods","search","terms","getSearch","then","component"],"mappings":"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","file":"appForm.umd.min.34.js","sourcesContent":["import { extend } from \"vee-validate\";\nimport { required, email, alpha, numeric } from \"vee-validate/dist/rules\";\n// No message specified.\nextend(\"email\", email);\n// Override the default message.\nextend(\"required\", {\n  ...required,\n  message: \"Ce champs est requis\",\n});\nextend(\"alpha\", alpha);\nextend(\"alpha\", numeric);\n//export default extend;\n","import config from \"./config.js\";\nconst validationRessource = {\n  conditions() {\n    return {\n      action: \"\",\n      name: \"\",\n      operator: \"\",\n      value: \"\",\n      state_name: \"\",\n    };\n  },\n  listsOperators() {\n    return [\n      {\n        text: \"Validé\",\n        value: \"validated\",\n      },\n      {\n        text: \"non vide\",\n        value: \"not_empty\",\n      },\n      {\n        text: \" vide\",\n        value: \"empty\",\n      },\n      {\n        text: \"la valeur du champs est egal à\",\n        value: \"egal\",\n      },\n      {\n        text: \"la valeur du champs est superieur à\",\n        value: \">\",\n      },\n    ];\n  },\n  Action(val = \"Ce champs\") {\n    return [\n      {\n        text: val + \" est visible\",\n        value: \"visible\",\n      },\n      {\n        text: val + \" est caché\",\n        value: \"hidden\",\n      },\n    ];\n  },\n  /**\n   * Validation des champs.\n   * Retourne false, pour desactiver.\n   * NB: formDatasValidate prend plus de temps pour ce mettre à jour.\n   */\n  computedValidation: function (formDatas, currentField, formDatasValidate) {\n    for (const i in formDatas.fields) {\n      const field = formDatas.fields[i];\n      if (field.name !== currentField.name) {\n        for (const j in currentField.states) {\n          const state = currentField.states[j];\n\n          // si le champs n'est pas definit on retourne false;\n          if (formDatasValidate[state.name] === undefined) {\n            return null;\n          }\n          if (field.name === state.name) {\n            // visible\n            if (state.action === \"visible\") {\n              if (field.value === \"\" && state.operator === \"not_empty\")\n                return false;\n              else if (field.value !== \"\" && state.operator === \"empty\")\n                return false;\n              else if (\n                state.operator === \"validated\" &&\n                formDatasValidate[field.name]\n              )\n                return formDatasValidate[field.name].valid;\n              else if (state.operator === \"egal\") {\n                if (field.value) {\n                  if (\n                    config.typeSelection.includes(field.type) &&\n                    field.value.includes\n                  ) {\n                    return field.value.includes(state.value) ? true : false;\n                  } else {\n                    const x = new String(field.value);\n                    const y = new String(state.value);\n                    return x.localeCompare(y) === 0 ? true : false;\n                  }\n                } else {\n                  return false;\n                }\n              } else if (state.operator === \">\") {\n                if (field.value) {\n                  const x = parseInt(field.value);\n                  const y = parseInt(state.value);\n                  return y < x ? true : false;\n                } else {\n                  return false;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n\n  /**\n   * Retourne la liste des etapes.\n   */\n  listesEtapes(form, formDatas, etapes = []) {\n    if (form && form.forms.length > 1) {\n      for (const i in form.forms) {\n        const currentForm = form.forms[i];\n        if (currentForm.info.name !== \"\") {\n          etapes.push({\n            text: \"(\" + i + \") \" + currentForm.info.title,\n            value: currentForm.info.name,\n          });\n        }\n      }\n    }\n  },\n  getFormStateByName(state_name, forms) {\n    for (const i in forms) {\n      const form = forms[i];\n      if (form.info.name === state_name) {\n        return form;\n      }\n    }\n  },\n  getFieldByName(name, fields) {\n    for (const i in fields) {\n      if (fields[i].name === name) {\n        return fields[i];\n      }\n    }\n  },\n};\n\nclass ValidationInstance {\n  constructor() {\n    //\n    this.StepeValidationOptions = [];\n  }\n  //Retourne les etapes sous forme de listes.\n  listeDesChamps(condition, form, fields = []) {\n    if (condition.state_name && condition.state_name !== \"\") {\n      var currentForm = validationRessource.getFormStateByName(\n        condition.state_name,\n        form.forms\n      );\n      if (currentForm !== undefined) {\n        for (const i in currentForm.fields) {\n          const field = currentForm.fields[i];\n          if (condition.name == field.name && field.options.length) {\n            this.StepeValidationOptions = field.options;\n          }\n          fields.push({ text: field.label, value: field.name });\n        }\n      }\n    }\n  }\n}\n/**/\n\nexport { validationRessource, ValidationInstance };\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:!_vm.validationField && _vm.mode ? 'mb-5' : ''},[(_vm.validationField)?_c('transition',{attrs:{\"name\":\"fade\"}},[_c('div',{staticClass:\"choice-section min-height\"},[_c('ValidationProvider',{staticClass:\"col-12 p-0\",attrs:{\"rules\":_vm.field.require,\"name\":_vm.field.name},scopedSlots:_vm._u([{key:\"default\",fn:function(v){return [_c('div',{staticClass:\"autocomplete\"},[_c('multiselect',{attrs:{\"options\":_vm.options,\"custom-label\":_vm.nameWithLang,\"placeholder\":\"\",\"label\":\"text\",\"track-by\":\"text\",\"show-no-results\":false,\"showLabels\":false,\"loading\":_vm.isLoading},on:{\"search-change\":_vm.asyncFind},model:{value:(_vm.field.value),callback:function ($$v) {_vm.$set(_vm.field, \"value\", $$v)},expression:\"field.value\"}},[_c('template',{slot:\"noResult\"},[_c('span',{staticClass:\"option__titl d-none\"},[_vm._v(\" Aucun contenu \")])]),_c('template',{slot:\"placeholder\"},[_c('span',{staticClass:\"option__title\"},[_vm._v(\" Code postal ou nom de la ville \")])]),_c('template',{slot:\"noOptions\"},[_c('span',{staticClass:\"option__title\"},[_vm._v(\" Saisir un code postal ou le nom d'une ville \")])])],2),_c('div',{staticClass:\"text-danger\"},_vm._l((v.errors),function(error,ii){return _c('small',{key:ii,staticClass:\"d-block\"},[_vm._v(\" \"+_vm._s(error)+\" \")])}),0)],1)]}}],null,false,3155301819)})],1)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"!validationField && mode ? 'mb-5' : ''\">\n    <transition v-if=\"validationField\" name=\"fade\">\n      <div class=\"choice-section min-height\">\n        <ValidationProvider\n          v-slot=\"v\"\n          :rules=\"field.require\"\n          class=\"col-12 p-0\"\n          :name=\"field.name\"\n        >\n          <div class=\"autocomplete\">\n            <multiselect\n              v-model=\"field.value\"\n              :options=\"options\"\n              :custom-label=\"nameWithLang\"\n              placeholder=\"\"\n              label=\"text\"\n              track-by=\"text\"\n              :show-no-results=\"false\"\n              :showLabels=\"false\"\n              :loading=\"isLoading\"\n              @search-change=\"asyncFind\"\n            >\n              <template slot=\"noResult\">\n                <span class=\"option__titl d-none\"> Aucun contenu </span>\n              </template>\n              <template slot=\"placeholder\">\n                <span class=\"option__title\">\n                  Code postal ou nom de la ville\n                </span>\n              </template>\n              <template slot=\"noOptions\">\n                <span class=\"option__title\">\n                  Saisir un code postal ou le nom d'une ville\n                </span>\n              </template>\n            </multiselect>\n            <div class=\"text-danger\">\n              <small v-for=\"(error, ii) in v.errors\" :key=\"ii\" class=\"d-block\">\n                {{ error }}\n              </small>\n            </div>\n          </div>\n        </ValidationProvider>\n      </div>\n    </transition>\n  </div>\n</template>\n\n<script>\nimport { mapGetters, mapState } from \"vuex\";\nimport { ValidationProvider } from \"vee-validate\";\nimport { validationRessource as Validation } from \"../config/validation.js\";\nimport \"../EditsFields/vee-validate-custom.js\";\nimport Multiselect from \"vue-multiselect\";\nimport { termsTaxo } from \"drupal-vuejs\";\n\nexport default {\n  props: {\n    field: {\n      type: Object,\n      require: true,\n    },\n  },\n  components: {\n    Multiselect,\n    ValidationProvider,\n  },\n  data() {\n    return {\n      isLoading: false,\n      options: [],\n    };\n  },\n  computed: {\n    ...mapGetters([\"formDatas\"]),\n    ...mapState([\"formDatasValidate\", \"mode\"]),\n    validationField() {\n      var status = true;\n      if (this.field.states.length) {\n        status = Validation.computedValidation(\n          this.formDatas,\n          this.field,\n          this.formDatasValidate\n        );\n        if (status === undefined) status = false;\n        this.setStatus(status);\n        return status;\n      } else {\n        this.setStatus(status);\n        return status;\n      }\n    },\n  },\n  methods: {\n    setStatus(status) {\n      this.$set(this.field, \"status\", status);\n    },\n    nameWithLang({ text }) {\n      //return `${text} — [${value}]`;\n      return `${text}`;\n    },\n    asyncFind(search) {\n      if (search.length > 2) {\n        let vocabulary = this.field.vocabulary\n          ? this.field.vocabulary\n          : \"departements\";\n        const terms = new termsTaxo(vocabulary);\n        this.isLoading = true;\n        terms.getSearch(search).then(() => {\n          this.options = terms.getOptions();\n          this.isLoading = false;\n        });\n      }\n    },\n  },\n};\n</script>\n\n<style src=\"vue-multiselect/dist/vue-multiselect.min.css\"></style>\n<style></style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Autocomplete.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Autocomplete.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Autocomplete.vue?vue&type=template&id=733571de&\"\nimport script from \"./Autocomplete.vue?vue&type=script&lang=js&\"\nexport * from \"./Autocomplete.vue?vue&type=script&lang=js&\"\nimport style0 from \"vue-multiselect/dist/vue-multiselect.min.css?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}