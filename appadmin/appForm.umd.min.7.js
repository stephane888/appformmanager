(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[7],{"0b7d":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"element-center full-block"},[i("div",{staticClass:"choice-section text-right"},[i("b-row",{attrs:{"align-h":"end"}},[i("b-col",[i("p",{staticClass:"button-travaux"},[i("a",{attrs:{href:"/node/52"}},[t._v("Tous les travaux")])])])],1),t.mode?i("b-button-group",{staticClass:"boutton-absolute"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-info",modifiers:{hover:!0,"v-info":!0}}],attrs:{variant:"outline-info",size:"md",title:"Ajouter un champs"},on:{click:t.addFormField}},[i("b-icon",{staticStyle:{"font-size":"1.5rem"},attrs:{icon:"plus"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-success",modifiers:{hover:!0,"v-success":!0}}],attrs:{variant:"outline-success",size:"md",title:"Editer le formulaire"},on:{click:t.configSteps}},[i("b-icon",{attrs:{icon:"pencil"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-danger",modifiers:{hover:!0,"v-danger":!0}}],attrs:{variant:"outline-danger",size:"md",title:"Suprimer le formulaire"},on:{click:t.deleteSteps}},[i("b-icon",{attrs:{icon:"trash"}})],1),i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.clone-current-stepe",modifiers:{"clone-current-stepe":!0}},{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-secondary",modifiers:{hover:!0,"v-secondary":!0}}],attrs:{variant:"outline-secondary",size:"md",title:"cloner l'etape"}},[i("b-icon",{attrs:{icon:"clipboard-plus"}})],1)],1):t._e()],1),i("forms"),t.mode?i("div",[i("add-form-field",{ref:"formField",attrs:{isOpen:t.modalFormFieldIsOpen,nouveau:!0,"id-modal":"form-step"}}),i("StepConfiguration",{ref:"StepConfiguration"}),i("cloneCurrentStepe")],1):t._e()],1)},s=[],o=i("f3f3"),n=(i("e260"),i("d3b7"),i("e6cf"),i("3ca3"),i("ddb0"),i("a434"),i("2f62")),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ValidationObserver",{staticClass:"center-container",scopedSlots:t._u([{key:"default",fn:function(e){return[a("b-row",{staticClass:"block-container",attrs:{"align-h":"center"}},[t.stepsIndex>0?a("b-col",{staticClass:"text-left",attrs:{cols:"12"}},[a("div",{staticClass:"backButton",on:{click:t.back}},[a("img",{attrs:{src:i("6416"),alt:""}})])]):t._e(),t.formDatas.info.headerTitle&&t.formDatas.info.description?a("div",{staticClass:"help-container"},[a("div",{staticClass:"help-block"},[a("p",{staticClass:"help-block__title"},[t._v(t._s(t.formDatas.info.headerTitle))]),a("p",{staticClass:"help-block__content"},[t._v(" "+t._s(t.formDatas.info.description)+" ")])])]):t._e(),t._l(t.formDatas.fields,(function(t,e){return a("div",{key:e,staticClass:"col-12"},[a("display-fields",{attrs:{type:t.type,id:e}})],1)})),t.StatusStepsIndexs?a("b-col",{staticClass:"form-nav-bouton",attrs:{cols:"12"}},[a("button",{staticClass:"next-bouton",class:t.stepsState&&!e.invalid?"next-bouton--active":"next-bouton--disable",attrs:{disabled:!(t.stepsState&&!e.invalid)},on:{click:t.suivant}},[t._v(" Suivant ")])]):t._e(),t.StatusStepsIndexs?t._e():a("b-col",{staticClass:"form-nav-bouton",attrs:{cols:"12"}},[a("b-row",[t.uid?a("b-col",[a("button",{staticClass:"next-bouton",on:{click:function(e){return t.SaveByUser(1)}}},[a("b-icon",{attrs:{icon:"server"}}),t._v(" Enregistrer ")],1)]):t._e(),a("b-col",[a("button",{staticClass:"next-bouton",on:{click:function(e){return t.SaveByUser(0)}}},[a("b-icon",{attrs:{icon:"server"}}),t._v(" Me rappeller ")],1)])],1)],1)],2),a("getStatusValidation",{attrs:{"validation-observer":e}})]}}])})},l=[],d=i("7bb1"),c=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",["codepostal"==t.type?i("b-row",{attrs:{"align-h":"center"}},[i("b-col",[i("autocomplete",{attrs:{field:t.formDatas.fields[t.id]}})],1)],1):t._e(),"checkboximg"==t.type?i("ImageCheck",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"text"==t.type||"number"==t.type?i("label-row",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"numberup"==t.type?i("label-up",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"increment"==t.type?i("b-row",{attrs:{"align-h":"center"}},[i("increment-number",{attrs:{field:t.formDatas.fields[t.id]}})],1):t._e(),"markuptitle"==t.type?i("markup-title",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"markupimage"==t.type?i("markup-image",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"radio"==t.type?i("radio",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"select"==t.type?i("select-display",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"checkbox"==t.type?i("checkbox",{attrs:{field:t.confirmStructureField(t.formDatas.fields[t.id])}}):t._e(),"radiodesc"==t.type?i("radio-desc",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"file"==t.type?i("files",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"recapitulatif"==t.type?i("recapitulatif",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"userlogin"==t.type?i("userlogin",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),"input-aide-financiere"==t.type?i("AideFinanciere",{attrs:{field:t.formDatas.fields[t.id]}}):t._e(),this.$store.state.mode?i("div",{staticClass:"boutton-absolute d-flex"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-success",modifiers:{hover:!0,"v-success":!0}}],staticClass:"border-0",attrs:{size:"sm",variant:"outline-success",title:"Editer ce champs"},on:{click:t.editFormField}},[i("b-icon",{attrs:{icon:"pencil","font-scale":"1"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-danger",modifiers:{hover:!0,"v-danger":!0}}],staticClass:"border-0",attrs:{size:"sm",variant:"outline-danger",title:"Supprimer ce champs"},on:{click:t.deleteField}},[i("b-icon",{attrs:{icon:"trash","font-scale":"1"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-secondary",modifiers:{hover:!0,"v-secondary":!0}}],staticClass:"border-0",attrs:{size:"sm",variant:"outline-secondary",title:"Deplacer vers le haut"},on:{click:t.modeToUp}},[i("b-icon",{attrs:{icon:"arrow-bar-up","font-scale":"1"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-secondary",modifiers:{hover:!0,"v-secondary":!0}}],staticClass:"border-0",attrs:{size:"sm",variant:"outline-secondary",title:"Deplacer vers le bas"},on:{click:t.moveToDown}},[i("b-icon",{attrs:{icon:"arrow-bar-down","font-scale":"1"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-secondary",modifiers:{hover:!0,"v-secondary":!0}}],staticClass:"border-0",attrs:{size:"sm",variant:"outline-secondary",title:"Cloner ce champs"},on:{click:t.cloneField}},[i("b-icon",{attrs:{icon:"clipboard-plus","font-scale":"1"}})],1)],1):t._e()],1),i("add-form-field",{ref:"editFormField"+t.id,attrs:{field:t.field,nouveau:!1,"id-modal":"edit"+t.id}})],1)},u=[],f=i("0122"),m=(i("a9e3"),i("cfb1")),p=i("2c10"),b={components:{AddFormField:m["default"],ImageCheck:function(){return i.e(10).then(i.bind(null,"820b"))},IncrementNumber:function(){return i.e(11).then(i.bind(null,"1ad8"))},autocomplete:function(){return Promise.all([i.e(22),i.e(32)]).then(i.bind(null,"fd80"))},Radio:function(){return i.e(16).then(i.bind(null,"8bfb"))},RadioDesc:function(){return i.e(30).then(i.bind(null,"795e"))},Checkbox:function(){return i.e(29).then(i.bind(null,"7f81"))},LabelRow:function(){return i.e(12).then(i.bind(null,"ab64"))},SelectDisplay:function(){return i.e(31).then(i.bind(null,"1d25"))},MarkupTitle:function(){return i.e(15).then(i.bind(null,"725b"))},MarkupImage:function(){return i.e(14).then(i.bind(null,"1c8e"))},files:function(){return Promise.all([i.e(2),i.e(24)]).then(i.bind(null,"65db"))},LabelUp:function(){return i.e(13).then(i.bind(null,"cc4c"))},recapitulatif:function(){return i.e(17).then(i.bind(null,"1247"))},userlogin:function(){return i.e(18).then(i.bind(null,"be10"))},AideFinanciere:function(){return i.e(26).then(i.bind(null,"e8d9"))}},props:{type:{type:String,default:""},id:{type:Number,default:null}},data:function(){return{typeFieldSelected:null,option:{},field:{},labelState:null}},watch:{},computed:Object(o["a"])({},Object(n["b"])(["formDatas"])),methods:{confirmStructureField:function(t){if("checkbox"===t.type){var e=[],i=Object(f["a"])(t.value);"object"!==i&&(t.value&&""!==t.value?(e.push(t.value),t.value=e):t.value=[])}return t},getImage:function(t){var e=this.formDatas.fields[this.id].options;console.log("le",e);for(var i=0;i<e.length;i++)i==t?(e[i].isActive=!e[i].isActive,this.formDatas.fields[this.id].value=e[i].value):e[i].isActive=!1},editFormField:function(){var t="modal-addForm--edit"+this.id;this.field=this.formDatas.fields[this.id],this.$bvModal.show(t)},deleteField:function(){for(var t=this.formDatas.fields,e=t.length-1;e>=0;e--)e===this.id&&(t.splice(e,1),console.log("iiippp"))},moveToDown:function(){var t=this.id+1;p["a"].array_move(this.formDatas.fields,this.id,t)},modeToUp:function(){var t=this.id-1;p["a"].array_move(this.formDatas.fields,this.id,t)},cloneField:function(){var t=JSON.stringify(this.formDatas.fields[this.id]);this.formDatas.fields.push(JSON.parse(t))}}},h=b,v=i("2877"),y=Object(v["a"])(h,c,u,!1,null,null,null),g=y.exports,_=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{object:t.validationObserverField}},[i("pre",{staticClass:"text-left d-none"},[t._v(t._s(t.formDatasValidate))])])},D=[],O={name:"getStatusValidation",props:{validationObserver:{type:Object,required:!0}},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:Object(o["a"])(Object(o["a"])({},Object(n["c"])(["formDatasValidate"])),{},{validationObserverField:function(){return this.validationObserver.fields?(this.setFormDatasValidate(),this.validationObserver.fields):{}}}),methods:{setFormDatasValidate:function(){this.$store.dispatch("setFormDatasValidate",this.validationObserver.fields)}}},k=O,S=Object(v["a"])(k,_,D,!1,null,"d99bc1b4",null),x=S.exports,F={name:"forms",components:{ValidationObserver:d["a"],DisplayFields:g,getStatusValidation:x},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(n["c"])(["form","mode","stepsIndex","StatusStepsIndexs","price"])),Object(n["b"])(["formDatas","uid"])),{},{stepsState:function(){return!!(this.form.forms&&this.form.forms.length-1>this.$store.state.stepsIndex)}}),methods:{suivant:function(){if(this.stepsState){this.$store.dispatch("stepsIndex",this.stepsIndex);var t=!0;this.mode&&!t||this.$store.dispatch("saveDatas")}},back:function(){this.$store.dispatch("stepsBack")},SaveByUser:function(t){this.$store.dispatch("saveDatasUser",t)}}},w=F,C=(i("ee83"),Object(v["a"])(w,r,l,!1,null,null,null)),j=C.exports,I={components:{AddFormField:function(){return Promise.resolve().then(i.bind(null,"cfb1"))},StepConfiguration:function(){return i.e(19).then(i.bind(null,"e248"))},cloneCurrentStepe:function(){return i.e(20).then(i.bind(null,"33f3"))},forms:j},data:function(){return{modalFormFieldIsOpen:!1,inputDatas:[],selected:"",options:[{text:"chamblie",value:"a"},{text:"callakala",value:"b"}],imageCheck:[{isActive:!1,description:"1 côté"},{isActive:!1,description:"2 côté"},{isActive:!1,description:"3 côté"},{isActive:!1,description:"4 côté"}]}},mounted:function(){},watch:{fields:function(){console.log("changement")}},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(n["c"])(["mode","stepsIndex","stepsIndexs","form"])),Object(n["b"])(["formDatas"])),{},{taille:function(){return!!this.fields.options.length}}),methods:{deleteSteps:function(){for(var t=this.$store.getters.form.forms,e=t.indexOf(this.formDatas),i=t.length-1;i>=0;i--)i===e&&(t.splice(i,1),this.$store.state.stepsIndex=this.form.forms.length-1)},addFormField:function(){this.$refs.formField.openAddFormFieldPopUp()},configSteps:function(){this.$refs.StepConfiguration.openPopUp()},getImage:function(t){for(var e=0;e<this.imageCheck.length;e++)this.imageCheck[e].isActive=e==t&&!this.imageCheck[e].isActive}}},$=I,N=Object(v["a"])($,a,s,!1,null,null,null);e["a"]=N.exports},"169f":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-row",{attrs:{"align-h":"center"}},[t.formDatas&&t.formDatas.info?i("b-col",{attrs:{cols:"12",lg:"10"}},[i("div",[i("title-bar",{attrs:{conf:{col:!0,text:"Configuration du formulaire"},id:t.id}}),i("nav-line",{attrs:{taille:t.id}}),i("loaderIcon",{attrs:{busy:t.isComplete}}),t.isComplete?t._e():i("FormStep")],1)]):t._e(),t.$store.state.mode?i("b-col",{attrs:{cols:"12",lg:"2"}},[i("div",{staticClass:"block-button"},[i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"shadow-md d-block w-100",attrs:{variant:"light",squared:""}},[t._v(" Configuration ")]),i("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"light"},on:{click:t.clearFormDatas}},[t._v(" Ajouter une etape ")]),i("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.re-order-stepes",modifiers:{"re-order-stepes":!0}}],staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"light"}},[t._v(" Re-ordonner les etapes ")]),i("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"secondary"},on:{click:t.resetValue}},[t._v(" Reset value ")]),i("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"success"},on:{click:t.saveToLocal}},[t._v(" Enregistrer ")]),i("b-button",{staticClass:"shadow-md d-block w-100",attrs:{squared:"",variant:"dark"},on:{click:t.exportJson}},[t._v(" Export to json ")]),i("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Edition du formulaire","hide-footer":""},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[t.formDatas&&t.formDatas.info?i("form",{ref:"form",on:{submit:t.handleSubmit,reset:t.resetModal}},[i("b-row",[i("b-col",{attrs:{cols:"8"}},[i("b-form-group",{attrs:{label:"name","label-for":"name-input"}},[i("b-form-input",{attrs:{id:"db-input",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),i("b-col",{attrs:{cols:"8"}},[i("b-form-group",{attrs:{label:"Id","label-for":"description-input"}},[i("b-form-input",{attrs:{id:"desc-input-id"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1)],1),i("b-col",{attrs:{cols:"8"}},[i("b-form-group",{attrs:{label:"Description","label-for":"description-input"}},[i("b-form-textarea",{attrs:{id:"desc-input",required:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1),i("b-col",{attrs:{cols:"12"}},[i("b-form-group",{attrs:{label:"image","label-for":"description-input"}},[i("UploadImage",{attrs:{field:t.form}})],1)],1)],1),i("hr",{staticClass:"my-3"}),i("b-row",{attrs:{"align-h":"end"}},[i("div",{staticClass:"mr-3"},[i("b-button",{staticClass:"mr-2"},[t._v(" export ")]),i("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[t._v(" Mise à jour ")])],1)])],1):t._e()])],1)]):t._e()],1),i("reOrderStepes")],1)},s=[],o=i("f3f3"),n=(i("e260"),i("d3b7"),i("e6cf"),i("3ca3"),i("ddb0"),i("a434"),i("2b3d"),i("9861"),i("a15b"),i("caad"),i("63c9")),r=i("f158"),l=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"nav-line"},t._l(t.idLevel,(function(e,a){return i("div",{key:a,staticClass:"w-100"},[i("b-button",{staticClass:"nav-line__nav",class:a==t.stepsIndex?"nav-line__nav--dark":"nav-line__nav--normal",attrs:{title:"Etape "+a,variant:"primary",id:"tooltip-1"+a},on:{click:function(e){return t.loadSteps(a)}}}),i("b-tooltip",{attrs:{target:"tooltip-1"+a,triggers:"hover",variant:"info"}},[i("b",[t._v("etape "+t._s(a))]),t._v(" "),i("br"),i("div",[t._v(t._s(t.form.forms[a].info.title))])])],1)})),0)},d=[],c=(i("a9e3"),i("2f62")),u={props:{taille:{require:!0}},components:{},data:function(){return{value:1}},watch:{taille:function(){}},mounted:function(){var t=localStorage.getItem("step"),e=localStorage.getItem("id");null!==e&&t.length&&e==this.taille?this.$store.state.stepsIndex=Number(t):this.$store.state.stepsIndex=0},computed:Object(o["a"])(Object(o["a"])({},Object(c["c"])(["stepsIndex","form"])),{},{idLevel:function(){var t=[];if(this.form.forms&&this.form.forms.length)for(var e in this.form.forms)t.push(e);return t}}),methods:{loadSteps:function(t){this.$store.state.stepsIndex=t,localStorage.setItem("step",t),localStorage.setItem("id",this.taille)}}},f=u,m=(i("3734"),i("2877")),p=Object(m["a"])(f,l,d,!1,null,null,null),b=p.exports,h=i("0b7d"),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("b-modal",{ref:"modal",attrs:{id:"re-order-stepes",title:"Re-ordonner les etapes","hide-footer":"",size:"lg"}},[i("b-list-group",t._l(t.form.forms,(function(e,a){return i("b-list-group-item",{key:a},[i("div",{staticClass:"d-flex align-items-center"},[i("b-button",{staticClass:"border-0",attrs:{variant:"outline-info"},on:{click:function(e){return t.modeToUp(a)}}},[i("b-icon",{attrs:{icon:"arrow-bar-up"}})],1),i("b-button",{staticClass:"border-0",attrs:{variant:"outline-info"},on:{click:function(e){return t.moveToDown(a)}}},[i("b-icon",{attrs:{icon:"arrow-bar-down"}})],1),i("div",{staticClass:"pl-5",class:[e.states&&e.states.length>0?"ml-5":""]},[t._v(" "+t._s(a)+" : "+t._s(e.info.title)+" "),e.states&&e.states.length>0?i("div",t._l(e.states,(function(e,a){return i("div",{key:a},[i("small",[t._v(" "+t._s(t.getNameStep(e.state_name))+" ")])])})),0):t._e()])],1)])})),1),i("div",{staticClass:"justify-content-end d-flex"},[i("div",{staticClass:"mx-2 my-4"},[i("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:function(e){return t.$bvModal.hide("re-order-stepes")}}},[t._v(" Mettre à jour ")])],1)])],1)],1)},y=[],g=(i("b0c0"),i("2c10")),_={name:"reOrderStepes",props:{},components:{},data:function(){return{}},mounted:function(){},watch:{},computed:Object(o["a"])({},Object(c["c"])(["form"])),methods:{moveToDown:function(t){var e=t+1;g["a"].array_move(this.form.forms,t,e)},modeToUp:function(t){var e=t-1;g["a"].array_move(this.form.forms,t,e)},getNameStep:function(t){for(var e in this.form.forms)if(this.form.forms[e].info.name===t)return this.form.forms[e].info.title}}},D=_,O=Object(m["a"])(D,v,y,!1,null,"494ba7f9",null),k=O.exports,S=i("021a"),x={components:{FormStep:h["a"],NavLine:b,reOrderStepes:k,TitleBar:n["a"],loaderIcon:S["a"],UploadImage:function(){return Promise.all([i.e(2),i.e(4)]).then(i.bind(null,"9353"))}},props:{id:{type:String,required:!0}},data:function(){return{datasBd:[],stepsId:1,demo:!0,title:"",datasBase:{description:"",id:null,forms:"",name:""},busy:!1}},watch:{stepsId:function(){this.datasBdOrLocalStorage()}},mounted:function(){var t=this;this.$store.dispatch("setFormId",this.id),this.$store.dispatch("loadFormsDatas"),this.busy=!0,this.$store.dispatch("loadStepsDatas",{formId:this.id}).then((function(){t.busy=!1}))},computed:Object(o["a"])(Object(o["a"])(Object(o["a"])({},Object(c["c"])(["stepsIndex","allStepsDatas","fields","price","mode","priceAide","items","form"])),Object(c["b"])(["formDatas"])),{},{currentSteps:function(){var t=localStorage.getItem("allo"),e=JSON.parse(t);return null!=e&&e.length?e[this.stepsIndex]:this.formDatas},stepsDatas:function(){var t=this.datasBd;return this.datasBd.length?(console.log("object io",t[this.stepsId-1]),t[this.stepsId-1]):"vide"},isComplete:function(){return!(this.formDatas&&this.formDatas.fields.length||!this.busy)}}),methods:{deleteSteps:function(t){var e=this.$store.state.allStepsDatas,i=e.indexOf(this.formDatas);this.$emit("index-to-delete",i),console.log("de",t);for(var a=e.length-1;a>=0;a--)a===i&&(e.splice(a,1),console.log("iiippp"))},datasBdOrLocalStorage:function(){var t=localStorage.getItem("allo"),e=JSON.parse(t);if(console.log("loaaaa",e),"vide"!=this.stepsDatas){this.datasBase=this.stepsDatas,console.log("aaa",this.datasBase);var i=JSON.parse(this.datasBase.forms);this.$store.state.allStepsDatas=i,this.$store.state.formDatas=this.allStepsDatas[this.stepsIndex]}else null!=e&&e.length?(console.log("appppaaa",e),this.$store.state.allStepsDatas=e,this.$store.state.formDatas=this.allStepsDatas[this.stepsIndex]):"vide"==this.stepsDatas&&alert("Désolé nous n'avons pas pue accéder à la BD  et vous n'avez aucune données dans votre localStorage")},saveToLocal:function(){var t=this;this.busy=!0,r["a"].prepareDatasToSave(this.form).then((function(e){r["a"].saveForm(e,t.mode).then((function(){t.busy=!1})).catch((function(){t.busy=!1}))}))},exportJson:function(){var t=window.prompt("Veuillez renseigner le nom du fichier","test").toLowerCase(),e=JSON.stringify(this.form),i=new Blob([e],{type:"text/plain"}),a=document.createEvent("MouseEvents"),s=document.createElement("a");s.download=t+".json",s.href=window.URL.createObjectURL(i),s.dataset.downloadurl=["text/json",s.download,s.href].join(":"),a.initEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(a)},clearFormDatas:function(){var t={info:{headerTitle:"",title:"",name:""},fields:[]};this.form.forms.push(t),this.$store.state.stepsIndex=this.form.forms.length-1},resetValue:function(){var t=["radio","text","select","number","radiodesc","codepostal"],e=["checkbox"];for(var i in this.formDatas.fields){var a=this.formDatas.fields[i];t.includes(a.type)?a.value=null:e.includes(a.type)?a.value=[]:"userlogin"===a.type&&(a.value=null)}},resetModal:function(){},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(t){var e=this;t.preventDefault(),this.demo=!0,this.saveToLocal(),this.$nextTick((function(){e.$bvModal.hide("modal-prevent-closing")}))}}},F=x,w=(i("89b6"),Object(m["a"])(F,a,s,!1,null,null,null));e["default"]=w.exports},3734:function(t,e,i){"use strict";i("54f5")},"54f5":function(t,e,i){},"64d1":function(t,e,i){},"75eb":function(t,e,i){},"89b6":function(t,e,i){"use strict";i("cec3")},cec3:function(t,e,i){},cfb1:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-modal",{ref:"addForm",attrs:{size:"lg",id:"modal-addForm--"+t.idModal,title:"Ajouter un champs dans cette etape","hide-footer":"","content-class":["mange-add-field"]},on:{ok:t.handleOk},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[i("form",{ref:"forme",on:{submit:t.handleSubmit,reset:t.resetModal,hidden:t.resetModal}},[i("b-row",{},[i("b-col",{attrs:{md:"6"}},[t.dynamicfield?t._e():i("b-form-group",{attrs:{label:"Sélectionner un type de champs","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:t.typeOptions,required:""},model:{value:t.field.type,callback:function(e){t.$set(t.field,"type",e)},expression:"field.type"}})],1),t.dynamicfield?i("b-form-group",{attrs:{label:"Formulaire","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:t.formItems,required:""},model:{value:t.typeFormId,callback:function(e){t.typeFormId=e},expression:"typeFormId"}})],1):t._e()],1),i("b-col",{attrs:{md:"6"}},[i("b-form-group",{attrs:{isOverride:t.isOverride}},[i("b-form-checkbox",{attrs:{switch:"",size:"lg"},model:{value:t.dynamicfield,callback:function(e){t.dynamicfield=e},expression:"dynamicfield"}},[t._v(" Champs dynamique ")])],1)],1)],1),i("div",{staticClass:"content-config-field"},[t.dynamicfield?t._e():i("input-option-form",{attrs:{type:t.field.type,field:t.field}}),t.dynamicfield?i("div",[i("hr"),i("b-form-group",{attrs:{label:"Sélectionner le champs dynamique","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:t.OptionDynamicsField},on:{change:t.selectDynamicLabel},model:{value:t.field.name,callback:function(e){t.$set(t.field,"name",e)},expression:"field.name"}})],1),i("compositeHeaderField",{attrs:{field:t.field}})],1):t._e()],1),i("b-row",{attrs:{"align-h":"end"}},[i("div",{staticClass:"mr-3"},[i("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary"}},[t._v(" "+t._s(t.nameButtonOk)+" ")])],1)])],1),i("pre",[t._v(" field "+t._s(t.field)+" ")])])},s=[],o=i("276c"),n=i("f3f3"),r=(i("a9e3"),i("159b"),i("b0c0"),i("2f62")),l=i("4fa8"),d=i("d3ee"),c=i("2c10"),u=i("f158"),f={components:{inputOptionForm:l["a"],compositeHeaderField:d["default"]},props:{nouveau:{type:Boolean,require:!0,default:!0},field:{type:Object,default:function(){return c["a"].field()}},genre:{type:String,default:""},idModal:{type:[String,Number],required:!0}},data:function(){return{isOpen:!1,typeFieldSelected:null,type:null,labelState:null,typeOptions:c["a"].typeOptions(),OptionDynamicsField:[],dynamicfield:!1,typeFormId:""}},watch:{dynamicfield:function(){this.watchDynamicFields()},typeFormId:function(){this.loadDynamicFields()}},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(r["b"])(["formDatas"])),Object(r["c"])(["items","formId"])),{},{nameButtonOk:function(){return this.nouveau?"Ajouter":"Mettre à jour"},formItems:function(){var t=[];return this.items.forEach((function(e){t.push({text:e.name,value:e.id})})),t},isOverride:function(){return this.init(),!!this.field.override}}),methods:{init:function(){this.typeFormId=this.formId,this.field.override&&(this.dynamicfield=!0)},optionAddToFields:function(){var t=function t(e){Object(o["a"])(this,t),this.hauteur=e},e=new t(this.field),i={};for(var a in e.hauteur)i[a]=e.hauteur[a];this.formDatas.fields.push(i),c["a"].resetField(this.field)},resetModal:function(){this.type=null},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(t){var e=this;t.preventDefault(),this.isOpen=!this.isOpen,this.nouveau&&this.optionAddToFields(),this.$emit("input_to_add",this.field),this.$nextTick((function(){e.$bvModal.hide("modal-prevent-closing")}))},watchDynamicFields:function(){this.dynamicfield?this.loadDynamicFields():this.typeOptions=c["a"].typeOptions()},loadDynamicFields:function(){var t=this;console.log("loadDynamicFields");var e=" select * from appformmanager_fields ";this.typeFormId&&(e+=" where formid='"+this.typeFormId+"'"),u["a"].getData(e).then((function(e){var i=[];e.data.forEach((function(t){var e=JSON.parse(t.jsonfield);i.push({value:t.machine_name,text:e.label})})),t.OptionDynamicsField=i}))},selectDynamicLabel:function(t){var e=this;this.OptionDynamicsField.forEach((function(i){i.value==t&&(e.field.label=i.text)}))}}},m=f,p=(i("f67f"),i("2877")),b=Object(p["a"])(m,a,s,!1,null,null,null);e["default"]=b.exports},ee83:function(t,e,i){"use strict";i("75eb")},f67f:function(t,e,i){"use strict";i("64d1")}}]);
//# sourceMappingURL=appForm.umd.min.7.js.map