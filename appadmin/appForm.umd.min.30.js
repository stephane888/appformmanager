(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[30],{"379c":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{attrs:{fluid:"md"}},[a("div",[a("title-bar",{attrs:{conf:{col:!0,text:"Traitement devis : "+t.titreDevis},id:t.id,showDevis:!1}})],1),a("div",{staticClass:"appfom-container"},[a("b-row",{attrs:{"align-h":"center"}},[a("b-col",{attrs:{cols:"12"}},[a("listBlocks",{attrs:{liste_fields_check:t.ListeFieldsCheck,liste_fields_display:t.ListeFieldsDisplay,totalRows:t.totalRows,isBusy:t.isBusy,perPage:t.perPage},on:{"ev-change-pagination":t.ChangePagination}})],1)],1)],1)])},i=[],n=a("f3f3"),r=(a("b0c0"),a("a434"),a("63c9")),o=a("f158"),l=a("2f62"),f=a("8bba"),c={components:{listBlocks:f["a"],TitleBar:r["a"]},props:{id:{type:String,required:!0}},data:function(){return{totalRows:0,isBusy:!1,perPage:8}},watch:{stepsId:function(){this.datasBdOrLocalStorage()}},mounted:function(){this.loadDatas(),this.getTotalRows()},computed:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(l["c"])(["traitementId","form","traitementItems"])),Object(l["b"])(["traitementFormItems"])),{},{ListeFieldsDisplay:function(){var t=[{label:"Date",key:"created",formatter:function(t){return o["a"].getMysqlDateToFrench(t)}},{label:"Que souhaitez vous faire",key:"action",stickyColumn:!0,thStyle:{minWidth:"170px"},tdClass:["bg-light"]},{label:"Status",key:"status",thStyle:{minWidth:"140px"}},{label:"Prix",key:"price",thStyle:{minWidth:"120px"},formatter:function(t){return t+" â‚¬"}},{label:"Utilisateur",key:"uid",thStyle:{minWidth:"220px"}}];for(var e in this.form.forms){var a=this.form.forms[e];for(var s in a.fields){var i=a.fields[s];i.display_field&&t.push({label:i.label,key:i.name,thStyle:{minWidth:"220px"}})}}return t},ListeFieldsCheck:function(){var t=[];for(var e in this.ListeFieldsDisplay)t.push(this.ListeFieldsDisplay[e].key);return t},titreDevis:function(){return this.traitementItems.length?this.traitementItems[0].name:""}}),methods:{deleteSteps:function(){var t=this.$store.state.allStepsDatas,e=t.indexOf(this.formDatas);this.$emit("index-to-delete",e);for(var a=t.length-1;a>=0;a--)a===e&&t.splice(a,1)},saveToLocal:function(){o["a"].prepareDatasToSave(this.form).then((function(t){o["a"].saveForm(t).then((function(){}))}))},resetValue:function(){this.$store.getters.formDatas.selected="",this.$store.getters.formDatas.value=[]},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(t){var e=this;t.preventDefault(),this.$nextTick((function(){e.$bvModal.hide("modal-prevent-closing")}))},getTotalRows:function(){var t=this,e={beginSql:" select count(*) as nombres from `appformmanager_datas` ",filters:{AND:[],OR:[]}};e.filters.AND.push({column:"appformmanager_forms",value:this.id}),o["a"].bPost("/appformmanager/count-devis",e,{},!1).then((function(e){e.data[0]&&e.data[0].nombres&&(t.totalRows=parseInt(e.data[0].nombres))}))},loadDatas:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.isBusy=!0;var a={filters:{AND:[],OR:[]}};a.filters.AND.push({column:"appformmanager_forms",value:this.id,preffix:"dv"}),a.filters.AND.push({column:"order",value:0,preffix:"st"}),o["a"].bPost("/appformmanager/getdevis/"+e+"/"+this.perPage,a,{},!1).then((function(e){t.$store.state.traitementItems=e.data,t.$store.dispatch("setTraitId",t.id),t.$store.dispatch("setFormId",t.id),t.isBusy=!1})).catch((function(){t.isBusy=!1}))},ChangePagination:function(t){this.loadDatas(t-1)}}},u=c,d=(a("60ad"),a("2877")),h=Object(d["a"])(u,s,i,!1,null,null,null);e["default"]=h.exports},"60ad":function(t,e,a){"use strict";a("6653")},6653:function(t,e,a){}}]);
//# sourceMappingURL=appForm.umd.min.30.js.map