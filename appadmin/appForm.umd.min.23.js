(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[23],{3684:function(e,t,i){"use strict";i("ce14")},"36bc":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{attrs:{size:"lg",id:"modal-addForm--"+e.idModal,title:"Ajouter un champs dans le gestionnaire de champs","hide-footer":"","content-class":["mange-add-field"]},on:{ok:e.handleOk}},[i("loaderIcon",{attrs:{busy:e.busy}}),i("form",{ref:"forme",on:{submit:e.handleSubmit,reset:e.resetModal,hidden:e.resetModal}},[i("b-row",[i("b-col",{attrs:{cols:"6"}},[i("b-form-group",{attrs:{label:"Sélectionner un model de base","label-for":"type-input","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:e.typeOptions,id:"type-input",required:""},model:{value:e.field.type,callback:function(t){e.$set(e.field,"type",t)},expression:"field.type"}})],1)],1),i("b-col",{attrs:{cols:"6"}},[i("b-form-group",{attrs:{label:"Accosier à un formulaire","label-for":"type-input","invalid-feedback":"type is required",description:"Cela permet de grouper ce champs avec le formulaire selectionné"}},[i("b-form-select",{attrs:{options:e.listForms,disabled:""!==e.defaultFormid,id:"type-input-2",required:""},model:{value:e.field.formid,callback:function(t){e.$set(e.field,"formid",t)},expression:"field.formid"}})],1)],1)],1),i("input-option-form",{staticClass:"content-config-field",attrs:{type:e.field.type,field:e.field}}),i("b-row",{attrs:{"align-h":"end"}},[i("div",{staticClass:"mt-3 mx-3"},[i("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary",disabled:!(e.field.name.length>2)}},[e._v(" "+e._s(e.nameButtonOk)+" ")])],1)])],1)],1)},o=[],a=i("f3f3"),l=(i("a9e3"),i("159b"),i("2f62")),n=i("4fa8"),s=i("021a"),d=i("2c10"),u=i("f158"),c={components:{inputOptionForm:n["a"],loaderIcon:s["a"]},props:{field:{type:Object,required:!0},genre:{type:String,default:""},listForms:{type:Array,required:!0},defaultFormid:{type:String,default:null},idModal:{type:[String,Number],required:!0}},data:function(){return{typeFieldSelected:null,type:null,labelState:null,typeOptions:d["a"].typeOptions(),busy:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(l["b"])(["formDatas","uid"])),{},{nameButtonOk:function(){return this.field.id?"Mettre à jour":"Ajouter"}}),watch:{defaultFormid:function(e){var t=this;this.listForms.forEach((function(i){i.value===e&&(t.field.formid=i.value)}))}},methods:{resetModal:function(){this.type=null},handleOk:function(e){e.preventDefault(),this.handleSubmit()},handleSubmit:function(e){var t=this;this.busy=!0,e.preventDefault(),u["a"].prepareFieldToSave(this.field,this.uid).then((function(e){u["a"].saveForm(e).then((function(e){console.log("resp : ",e),e.data.forEach((function(e){"appformmanager_fields"==e.table&&t.$store.state.StoreGestionChamps.fields.push(Object(a["a"])(Object(a["a"])({},t.field),{},{id:e.result}))})),t.$bvModal.hide("modal-addForm--"+t.idModal),t.busy=!1,t.$emit("set_default_field")})).catch((function(){t.busy=!1}))}))}}},f=c,p=(i("3684"),i("2877")),m=Object(p["a"])(f,r,o,!1,null,null,null);t["a"]=m.exports},ce14:function(e,t,i){},f28f:function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("b-table",{attrs:{hover:"",small:"","caption-top":"",responsive:"",bordered:"",busy:e.loaders.GestionField,items:e.fieldsRender,fields:e.fieldsName},scopedSlots:e._u([{key:"table-busy",fn:function(){return[i("loaderIcon",{attrs:{busy:e.loaders.GestionField}})]},proxy:!0},{key:"cell(actions)",fn:function(t){return[i("buttonAction",{attrs:{row:t,listForms:e.listForms}})]}},{key:"cell(formid)",fn:function(t){return[e._v(" "+e._s(e.getStringValue(t.value))+" ")]}},{key:"cell(value)",fn:function(t){return[i(e.templateRender(t.item.type),{tag:"component",attrs:{field:t.item}})]}}])})],1)},o=[],a=i("f3f3"),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"boutton-absolute d-flex"},[i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-info",modifiers:{hover:!0,"v-info":!0}}],staticClass:"border-0",attrs:{size:"md",variant:"outline-info",title:"Editer le champs"},on:{click:e.editerField}},[i("b-icon",{attrs:{icon:"pencil-square","aria-hidden":"true"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-info",modifiers:{hover:!0,"v-info":!0}}],staticClass:"border-0 d-none",attrs:{size:"md",variant:"outline-secondary",title:"cloner le champs"},on:{click:function(t){return e.$emit("cloner-field",e.row)}}},[i("b-icon",{attrs:{icon:"clipboard-plus","aria-hidden":"true"}})],1),i("b-button",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-danger",modifiers:{hover:!0,"v-danger":!0}}],staticClass:"border-0",attrs:{size:"md",variant:"outline-danger",title:"Supprimer le champs"},on:{click:e.deleteField}},[i("b-icon",{attrs:{icon:"trash-fill","aria-hidden":"true"}})],1),i("AddForm",{attrs:{listForms:e.listForms,defaultFormid:e.field.formid,field:e.field,idModal:"edit"+e.row.index}})],1)},n=[],s=(i("a434"),i("36bc")),d=i("f158"),u={name:"tableauChampsAction",props:{row:{type:Object},listForms:{type:Array}},components:{AddForm:s["a"]},computed:{field:function(){return this.row?this.row.item:{}}},methods:{editerField:function(){this.$bvModal.show("modal-addForm--edit"+this.row.index)},deleteField:function(){var e=this;d["a"].modalConfirmDelete().then((function(){e.$store.state.loaders.GestionField=!0,d["a"].deleteField(e.row.item).then((function(){e.$store.state.fields.splice(e.row.index,1),e.$store.state.loaders.GestionField=!1}))}))}}},c=u,f=i("2877"),p=Object(f["a"])(c,l,n,!1,null,null,null),m=p.exports,b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("b-list-group",{staticClass:"list-small"},e._l(e.field.options,(function(t,r){return i("b-list-group-item",{key:r,staticClass:"item-vertical"},[i("div",{staticClass:"d-flex"},[i("span",{staticClass:"item"},[e._v(e._s(t.text))]),t.cout?i("span",{staticClass:"item"},[e._v(e._s(t.cout)+" €")]):e._e()])])})),1)],1)},h=[],v={name:"radio",props:{field:{type:Object,required:!0}}},y=v,F=Object(f["a"])(y,b,h,!1,null,null,null),k=F.exports,g=i("2f62"),O={name:"tableauChamps",props:{listForms:{type:Array,required:!0}},components:{buttonAction:m,radio:k},data:function(){return{fieldsName:[{key:"formid",label:"Group de champs"},{key:"label",sortable:!1,label:"Etiquetes"},{key:"value",label:"Prix",sortable:!0},{key:"type",label:"Type"},{key:"actions",label:"#Actions",class:["position-relative"]}]}},computed:Object(a["a"])(Object(a["a"])({},Object(g["c"])({loaders:function(e){return e.StoreGestionChamps.loaders},fields:function(e){return e.StoreGestionChamps.fields}})),{},{fieldsRender:function(){return this.fields}}),methods:{getStringValue:function(e){for(var t in this.listForms){var i=this.listForms[t];if(i.value===e)return i.text}},templateRender:function(e){var t="";switch(e){case"radio":t=k;break;case"checkbox":t=k;break;default:break}return t}}},_=O,w=Object(f["a"])(_,r,o,!1,null,null,null);t["default"]=w.exports}}]);
//# sourceMappingURL=appForm.umd.min.23.js.map