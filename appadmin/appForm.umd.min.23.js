(("undefined"!==typeof self?self:this)["webpackJsonpappForm"]=("undefined"!==typeof self?self:this)["webpackJsonpappForm"]||[]).push([[23],{3684:function(e,t,i){"use strict";i("ce14")},"36bc":function(e,t,i){"use strict";var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("b-modal",{attrs:{size:"lg",id:"modal-addForm--"+e.idModal,title:"Ajouter un champs dans le gestionnaire de champs","hide-footer":"","content-class":["mange-add-field"]},on:{ok:e.handleOk}},[i("loaderIcon",{attrs:{busy:e.busy}}),i("form",{ref:"forme",on:{submit:e.handleSubmit,reset:e.resetModal,hidden:e.resetModal}},[i("b-row",[i("b-col",{attrs:{cols:"6"}},[i("b-form-group",{attrs:{label:"Sélectionner un model de base","label-for":"type-input","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:e.typeOptions,id:"type-input",required:""},model:{value:e.field.type,callback:function(t){e.$set(e.field,"type",t)},expression:"field.type"}})],1)],1),i("b-col",{attrs:{cols:"6"}},[i("b-form-group",{attrs:{label:"Accosier à un formulaire","label-for":"type-input","invalid-feedback":"type is required",description:"Cela permet de grouper ce champs avec le formulaire selectionné"}},[i("b-form-select",{attrs:{options:e.listForms,disabled:""!==e.defaultFormid,id:"type-input-2",required:""},model:{value:e.field.formid,callback:function(t){e.$set(e.field,"formid",t)},expression:"field.formid"}})],1)],1)],1),i("input-option-form",{staticClass:"content-config-field",attrs:{type:e.field.type,field:e.field}}),i("b-row",{attrs:{"align-h":"end"}},[i("div",{staticClass:"mt-3 mx-3"},[i("b-button",{staticClass:"mr-2",attrs:{type:"submit",variant:"primary",disabled:!(e.field.name.length>2)}},[e._v(" "+e._s(e.nameButtonOk)+" ")])],1)])],1)],1)},l=[],o=i("f3f3"),a=(i("a9e3"),i("159b"),i("2f62")),s=i("4fa8"),n=i("021a"),d=i("2c10"),f=i("f158"),u={components:{inputOptionForm:s["a"],loaderIcon:n["a"]},props:{field:{type:Object,required:!0},genre:{type:String,default:""},listForms:{type:Array,required:!0},defaultFormid:{type:String,default:null},idModal:{type:[String,Number],required:!0}},data:function(){return{typeFieldSelected:null,type:null,labelState:null,typeOptions:d["a"].typeOptions(),busy:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(a["b"])(["formDatas","uid"])),{},{nameButtonOk:function(){return this.field.id?"Mettre à jour":"Ajouter"}}),watch:{defaultFormid:function(e){var t=this;this.listForms.forEach((function(i){i.value===e&&(t.field.formid=i.value)}))}},methods:{resetModal:function(){this.type=null},handleOk:function(e){e.preventDefault(),this.handleSubmit()},handleSubmit:function(e){var t=this;this.busy=!0,e.preventDefault(),f["a"].prepareFieldToSave(this.field,this.uid).then((function(e){f["a"].saveForm(e).then((function(i){e.forEach((function(e){"appformmanager_fields"==e.table&&(e.where||i.data.forEach((function(e){"appformmanager_fields"==e.table&&t.$store.state.StoreGestionChamps.fields.push(Object(o["a"])(Object(o["a"])({},t.field),{},{id:e.result,stepes:[]}))})))})),t.$bvModal.hide("modal-addForm--"+t.idModal),t.busy=!1,t.$emit("set_default_field")})).catch((function(){t.busy=!1}))}))}}},c=u,m=(i("3684"),i("2877")),p=Object(m["a"])(c,r,l,!1,null,null,null);t["a"]=p.exports},"70f9":function(e,t,i){"use strict";i.r(t);var r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{firstValue:e.firstValue}},[i("b-form",{staticClass:"mb-5"},[i("b-row",[i("b-col",{attrs:{md:"4"}},[i("b-form-group",{attrs:{label:"Grouper par formulaire.","label-for":"type-input","invalid-feedback":"type is required"}},[i("b-form-select",{attrs:{options:e.listForms,disabled:e.loaders.GestionFieldFiltre},on:{input:e.SelectionForm},model:{value:e.filtre.formid,callback:function(t){e.$set(e.filtre,"formid",t)},expression:"filtre.formid"}})],1)],1),i("b-col",{staticClass:"d-flex align-items-end pb-md-3 justify-content-end",attrs:{md:"8"}},[i("b-button",{staticClass:"mt-3 mr-3",attrs:{variant:"outline-info"},on:{click:e.OpenModalAddField}},[e._v(" + Ajouter un champs ")]),i("b-button",{staticClass:"mt-3 mr-3 d-none",attrs:{variant:"outline-info"}},[e._v(" + Exporter ")]),i("b-button",{staticClass:"mt-3 d-none",attrs:{variant:"outline-info"}},[e._v(" + Importer ")])],1)],1)],1),i("AddForm",{attrs:{listForms:e.listForms,defaultFormid:e.filtre.formid,field:e.field,idModal:"filter"},on:{set_default_field:e.set_default_field}})],1)},l=[],o=i("f3f3"),a=i("2f62"),s=i("36bc"),n=i("2c10"),d={created:function(){},name:"Filtres",props:{listForms:{type:Array,required:!0}},components:{AddForm:s["a"]},data:function(){return{field:n["a"].field()}},computed:Object(o["a"])(Object(o["a"])({},Object(a["c"])({filtre:function(e){return e.StoreGestionChamps.filtre},loaders:function(e){return e.StoreGestionChamps.loaders}})),{},{firstValue:function(){if(this.listForms[0]>0){var e=localStorage.getItem("gestionfields.defaultformid");return e||this.listForms[0].value,this.$store.dispatch("SetFiltre",{key:"formid",value:e}),this.listForms[0].value}return null}}),methods:{OpenModalAddField:function(){this.$bvModal.show("modal-addForm--filter")},set_default_field:function(){this.field=n["a"].field(),this.field.formid=this.filtre.formid},SelectionForm:function(e){localStorage.setItem("gestionfields.defaultformid",e),this.field.formid=this.filtre.formid,this.$store.dispatch("GetFields")}}},f=d,u=i("2877"),c=Object(u["a"])(f,r,l,!1,null,null,null);t["default"]=c.exports},ce14:function(e,t,i){}}]);
//# sourceMappingURL=appForm.umd.min.23.js.map